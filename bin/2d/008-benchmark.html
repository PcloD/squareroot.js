<!DOCTYPE html>
<html>
<head>
    <title>Performance benchmark | v0.1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable = no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<!-- SQRLIB -->
<!-- Auto-generated by tools/demojstags.py. Do not edit this section -->
<script type="text/javascript" src="../../src/requestAnimFrame.js"></script>
<script type="text/javascript" src="../../src/SQR.js"></script>
<script type="text/javascript" src="../../src/sqr/Squareroot.js"></script>
<script type="text/javascript" src="../../src/sqr/SquarerootGL.js"></script>
<script type="text/javascript" src="../../src/sqr/Transform.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Geometry.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/GLRect.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Plane.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Quad.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Triangle.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Interpolation.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Mathx.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Matrix2D.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Matrix33.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Matrix44.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Noise.js"></script>
<script type="text/javascript" src="../../src/sqr/math/PerlinNoise.js"></script>
<script type="text/javascript" src="../../src/sqr/math/ProjectionMatrix.js"></script>
<script type="text/javascript" src="../../src/sqr/math/QuadraticBezier.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Quaternion.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Spline.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Spring.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Vector2.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Vector3.js"></script>
<script type="text/javascript" src="../../src/sqr/math/VectorUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/physics/CSSCollider.js"></script>
<script type="text/javascript" src="../../src/sqr/physics/Particle.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/DOMElement2D.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/DOMElement3D.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/GL.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Point.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Polygon.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Segment.js"></script>
<script type="text/javascript" src="../../src/sqr/util/CanvasUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Color.js"></script>
<script type="text/javascript" src="../../src/sqr/util/DOMUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/util/GLState.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Interactor.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Loader.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Shader.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Stringify.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Time.js"></script>
<!-- SQRLIB -->

    <script type="text/javascript" src="../js/Circle.js"></script>
    <script type="text/javascript" src="../../lib/Stats.js"></script>
    <script type="text/javascript" src="../../lib/TweenMax.js"></script>

    <style type="text/css">

        body {
            overflow: hidden;
            margin: 0;
        }

        #cnv {
            background-color: #000000;
            position: absolute;
            top: 0px;
            left: 0px;
        }

    </style>

    <script type="text/javascript">

        var useTweenMax = false;

        var cnv, ctx;
        var cw, ch, circles = [];
        var radius = 5, padding = 4;

        var stats;

        window.onload = function() {

            stats = new Stats();
            stats.setMode(0);
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.left = '0%';
            stats.domElement.style.top = '0%';
            document.body.appendChild(stats.domElement);


            cnv = document.getElementById('cnv');
            cnv.width = window.innerWidth;
            cnv.height = window.innerHeight;

            ctx = cnv.getContext('2d');

            cw = ((window.innerWidth / (radius * 2 + padding)) | 0);
            ch = ((window.innerHeight / (radius * 2 + padding)) | 0);

            for (var x = 0; x < cw; x++) {
                for (var y = 0; y < ch; y++) {
                    var c = new Circle();
                    c.radius = radius;
                    c.color = new SQR.Color(0, 100, 15);
                    c.center.x = x * radius * 2 + radius + (x + 1) * padding;
                    c.center.y = y * radius * 2 + radius + (y + 1) * padding;

                    if (!useTweenMax) {
                        c.speed = .15 + Math.random() * .1;
                        c.phase = Math.PI * Math.random();
                        c.maxRadius = radius;
                    } else {
                        TweenMax.to(c, .5 + Math.random() * 1, { radius: radius * 0.2, yoyo: true, repeat: -1, delay: Math.random() });
                    }

                    circles.push(c);
                }
            }

            draw();
        }

        function draw() {

            stats.begin();

            requestAnimFrame(draw);

            ctx.clearRect(0, 0, cnv.width, cnv.height);

            var numc = circles.length;

            while (numc--) {

                var c = circles[numc];

                if (!useTweenMax) {
                    c.phase += c.speed;
                    c.radius = c.maxRadius * 0.6 + c.maxRadius * 0.4 * Math.sin(c.phase);
                }

                c.draw(ctx);
            }

            stats.end();
        }

    </script>

</head>
<body>

<canvas id="cnv"></canvas>

</body>
</html>