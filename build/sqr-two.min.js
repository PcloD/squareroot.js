var SQR={TWOPI:2*Math.PI,HALFPI:.5*Math.PI,EPSILON:1e-6,gl:null,flipMatrix:!0,fullScreenQuad:null,shaderPath:".",Primitives:{V2:function(t,n){return new SQR.V2(t,n)},V3:function(t,n,r){return new SQR.V3(t,n,r)},Q:function(t,n,r,i){return new SQR.Quaternion(t,n,r,i)},M4:function(){return new SQR.Matrix44},F:function(t){var n=function(t,r,i,e){var o=SQR.Face().v(t,r,i,e);return n.faces.push(o),o};return n.faces=[],n.toBuffer=function(r){var i=0;return n.faces.forEach(function(n){t&&t.reverseNormals&&n.flip(),n.calculateNormal(),i+=n.toBuffer(r,i,t&&t.perVertexNormal)}),i},n}},v2:function(){return{aPosition:2}},v3:function(){return{aPosition:3}},v2u2:function(){return{aPosition:2,aUV:2}},v2c3:function(){return{aPosition:2,aColor:3}},v3n3:function(){return{aPosition:3,aNormal:3}},v3n3u2:function(){return{aPosition:3,aNormal:3,aUV:2}},WARN_UNIFORM_NOT_PRESENT:!1};SQR.Version={version:"3.0",build:135,date:"Oct 28th 2015"},SQR.Bezier=function(t,n,r,i){var e=this;this.p0=t,this.c0=n,this.c1=r,this.p1=i;var o,s,a,h=SQR.Interpolation.bezierPosition,u=SQR.Interpolation.bezierVelocity;this.velocityAt=function(t,n){return s=s||this.p0.clone().set(),n=n||s,n.x=u(t,this.p0.x,this.c0.x,this.c1.x,this.p1.x),n.y=u(t,this.p0.y,this.c0.y,this.c1.y,this.p1.y),null!==n.z&&null!==this.p0.z&&(n.z=u(t,this.p0.z,this.c0.z,this.c1.z,this.p1.z)),n},this.valueAt=function(t,n){return o=o||this.p0.clone().set(),n=n||o,n.x=h(t,this.p0.x,this.c0.x,this.c1.x,this.p1.x),n.y=h(t,this.p0.y,this.c0.y,this.c1.y,this.p1.y),null!==n.z&&null!==this.p0.z&&(n.z=h(t,this.p0.z,this.c0.z,this.c1.z,this.p1.z)),n},this.matrixAt=function(t,n){a=a||new SQR.Matrix44,n=n||a,n.identity();var r=e.valueAt(t),i=e.velocityAt(t).norm(),o=SQR.V3.__tv1.set().cross(i,SQR.V3.up),s=SQR.V3.__tv2.set().cross(i,o);return n.data[0]=o.x,n.data[4]=s.x,n.data[8]=i.x,n.data[1]=o.y,n.data[5]=s.y,n.data[9]=i.y,n.data[2]=o.z,n.data[6]=s.z,n.data[10]=i.z,n.setTranslation(r.x,r.y,r.z),n}},SQR.Color=function(t,n,r,i){return this instanceof SQR.Color?(this.setRGB(t,n,r),void(this.a=void 0==i?1:i)):new SQR.Color(t,n,r,i)},SQR.Color.prototype.setRGB=function(t,n,r){var i=this;return i.r=t||0,i.g=n||0,i.b=r||0,i},SQR.Color.prototype.setHex=function(t){var n=this;return t instanceof String&&(t=0==t.indexOf("#")?t.substring(1):t,t=-1==t.indexOf("0x")?"0x"+t:t,t=parseInt(t)),n.r=(t>>16&255)/255,n.g=(t>>8&255)/255,n.b=(255&t)/255,n},SQR.Color.prototype.toCSS=function(){var t=this,n=255*t.r|0,r=255*t.g|0,i=255*t.b|0;return"rgb("+n+", "+r+", "+i+")"},SQR.Color.prototype.copyFrom=function(t){var n=this;return n.r=t.r,n.g=t.g,n.b=t.b,n},SQR.Color.prototype.lighten=function(t){return this.mul(t)},SQR.Color.prototype.clone=function(){return new SQR.Color(c.r,c.g,c.b)},SQR.Color.prototype.mul=function(t){var n=this;return n.r=Math.min(1,n.r*t),n.g=Math.min(1,n.g*t),n.b=Math.min(1,n.b*t),n},SQR.Color.prototype.lerp=function(t,n,r){var i=this,e=1-r;return i.r=t.r*e+n.r*r,i.g=t.g*e+n.g*r,i.b=t.b*e+n.b*r,i},SQR.Color.prototype.toUniform=function(){var t=this;return t._array||(t._array=new Float32Array(3)),t._array[0]=t.r,t._array[1]=t.g,t._array[2]=t.b,t._array},SQR.Delaunay=function(){function t(t,n){var i=[];return n=n.filter(function(n){return n.vertexInCircumcircle(t)?(i.push(new r(n.v0,n.v1)),i.push(new r(n.v1,n.v2)),i.push(new r(n.v2,n.v0)),!1):!0}),i=e(i),i.forEach(function(r){n.push(new SQR.Triangle(r.v0,r.v1,t))}),n}var n={},r=function(t,n){this.v0=t,this.v1=n};r.prototype.equals=function(t){return this.v0===t.v0&&this.v1===t.v1},r.prototype.inverse=function(){return new r(this.v1,this.v0)};var i=function(t){var n,r,i,e;t.forEach(function(t){(void 0===n||t.x<n)&&(n=t.x),(void 0===r||t.y<r)&&(r=t.y),(void 0===i||t.x>i)&&(i=t.x),(void 0===e||t.y>e)&&(e=t.y)});var o=10*(i-n),s=10*(e-r),a=t[0].clone().set(n-o,r-3*s),h=t[0].clone().set(n-o,e+s),u=t[0].clone().set(i+3*o,e+s);return new SQR.Triangle(a,h,u)},e=function(t){for(var n=[],r=0;r<t.length;++r){for(var i=t[r],e=!0,o=0;o<t.length;++o)if(r!==o){var s=t[o];if(i.equals(s)||i.inverse().equals(s)){e=!1;break}}e&&n.push(i)}return n};return n.triangulate=function(n){var r=[],e=i(n);return r.push(e),n.forEach(function(n){r=t(n,r)}),r=r.filter(function(t){return!(t.v0==e.v0||t.v0==e.v1||t.v0==e.v2||t.v1==e.v0||t.v1==e.v1||t.v1==e.v2||t.v2==e.v0||t.v2==e.v1||t.v2==e.v2)})},n}(),SQR.Interpolation={bezierPosition:function(t,n,r,i,e){return n*(1-t)*(1-t)*(1-t)+3*r*t*(1-t)*(1-t)+3*i*t*t*(1-t)+e*t*t*t},bezierVelocity:function(t,n,r,i,e){return 3*r-3*n+2*(3*n-6*r+3*i)*t+3*(-n+3*r-3*i+e)*t*t},linear:function(t,n,r){return t>=r?t:r>=n?n:(r=(r-t)/(n-t),t+(n-t)*r)},smoothStep:function(t){return 3*t*t-2*t*t*t},quadIn:function(t){return t*t},quadOut:function(t){return t*(2-t)},quadInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Math.clamp=function(t,n,r){return n>=t?n:t>=r?r:t},Math.clamp01=function(t){return 0>=t?0:t>=1?1:t},Math.absMin=function(t,n){return-n>=t||t>=n?t:t>=0?n:-n},Math.map=function(t,n,r){return n>=t?0:t>=r?1:(t-n)/(r-n)},SQR.Matrix2D=function(){this.data=new Float32Array(9);var t,n,r,i,e;this.identity=function(t){return t=t||this.data,t[0]=1,t[3]=0,t[6]=0,t[1]=0,t[4]=1,t[7]=0,t[2]=0,t[5]=0,t[8]=1,this},this.transformVector=function(t){return r=this.data,i=t.x,e=t.y,t.x=r[0]*i+r[1]*e+r[2],t.y=r[3]*i+r[4]*e+r[5],t},this.setTranslation=function(t,n,i){return r=i||this.data,r[0]=1,r[3]=0,r[6]=t,r[1]=0,r[4]=1,r[7]=n,r[2]=0,r[5]=0,r[8]=1,this},this.getTranslation=function(t){return r=this.data,t=t||new SQR.V2,t.x=r[2],t.y=r[5],t},this.setScale=function(t,n,i){return r=i||this.data,r[0]=t,r[3]=0,r[6]=0,r[1]=0,r[4]=n,r[7]=0,r[2]=0,r[5]=0,r[8]=1,this},this.setShear=function(t,n,i){return r=i||this.data,r[0]=1,r[3]=t,r[6]=0,r[1]=n,r[4]=1,r[7]=0,r[2]=0,r[5]=0,r[8]=1,this},this.setRotation=function(t,n){r=n||this.data;var i=Math.cos(t),e=Math.sin(t);return r[0]=i,r[3]=-e,r[6]=0,r[1]=e,r[4]=i,r[7]=0,r[2]=0,r[5]=0,r[8]=1,this},this.setTRS=function(t,n,i,e,o){r=this.data;var s=Math.cos(i),a=Math.sin(i);return r[0]=s*e,r[3]=-a*o,r[6]=t,r[1]=a*e,r[4]=s*o,r[7]=n,r[2]=0,r[5]=0,r[8]=1,this},this.translate=function(t,n){return this.identity(SQR.Matrix2D.__temp),this.setTranslation(t,n,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.rotate=function(t){return this.identity(SQR.Matrix2D.__temp),this.setRotation(t,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.scale=function(t,n){return this.identity(SQR.Matrix2D.__temp),this.setScale(t,n,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.shear=function(t,n){return this.identity(SQR.Matrix2D.__temp),this.setRotation(t,n,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)};var o,s,a,h,u,c,y,f,p,l,v,d,x,S,Q,R,m,w;this.multiply=function(r){return t=this.data,n=r.data||r,o=t[0],s=t[3],a=t[6],h=t[1],u=t[4],c=t[7],y=t[2],f=t[5],p=t[8],l=n[0],v=n[3],d=n[6],x=n[1],S=n[4],Q=n[7],R=n[2],m=n[5],w=n[8],t[0]=o*l+s*x+a*R,t[3]=o*v+s*S+a*m,t[6]=o*d+s*Q+a*w,t[1]=h*l+u*x+c*R,t[4]=h*v+u*S+c*m,t[7]=h*d+u*Q+c*w,this},this.copyTo=function(r){return t=this.data,n=r.data||r,n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],r},this.copyFrom=function(r){return t=r.data||r,n=this.data,n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this},this.identity()},SQR.Matrix2D.__temp=new Float32Array(9),SQR.Matrix33=function(){this.data=new Float32Array(9),this.identity=function(){var t=this.data;return t[0]=1,t[3]=0,t[6]=0,t[1]=0,t[4]=1,t[7]=0,t[2]=0,t[5]=0,t[8]=1,this},this.transformVector=function(t,n){var r=this.data,i=t.x,e=t.y,o=t.z;return n=n||t,n.x=r[0]*i+r[3]*e+r[6]*o,n.y=r[1]*i+r[4]*e+r[7]*o,n.z=r[2]*i+r[5]*e+r[8]*o,n},this.determinant=function(){var t=this.data;return t[0]*(t[4]*t[8]-t[7]*t[5])+t[3]*(t[7]*t[2]-t[1]*t[8])+t[6]*(t[1]*t[5]-t[4]*t[2])},this.inverse=function(t){var n=this.data;t=t||this.data;var r,i=n[0],e=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6],c=n[7],y=n[8],f=y*a-h*c,p=-y*s+h*u,l=c*s-a*u,n=i*f+e*p+o*l;return n?(r=1/n,t[0]=f*r,t[1]=(-y*e+o*c)*r,t[2]=(h*e-o*a)*r,t[3]=p*r,t[4]=(y*i-o*u)*r,t[5]=(-h*i+o*s)*r,t[6]=l*r,t[7]=(-c*i+e*u)*r,t[8]=(a*i-e*s)*r,t):(console.warn("Attempt to inverse a singular matrix33. ",this.data),t)},this.transpose=function(){var t=this.data,n=t[0],r=t[3],i=t[6],e=t[1],o=t[4],s=t[7],a=t[2],h=t[5],u=t[8];t[0]=n,t[1]=r,t[2]=i,t[3]=e,t[4]=o,t[5]=s,t[6]=a,t[7]=h,t[8]=u}},SQR.Matrix44=function(t){this.data=t||new Float32Array(16),this.identity=function(t){var n=t||this.data;return n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this},this.transformVector=function(t,n){var r=this.data,i=t.x,e=t.y,o=t.z,s=t.w;return n=n||t,n.x=r[0]*i+r[4]*e+r[8]*o+r[12]*s,n.y=r[1]*i+r[5]*e+r[9]*o+r[13]*s,n.z=r[2]*i+r[6]*e+r[10]*o+r[14]*s,n},this.rotateVector=function(t,n){{var r=this.data,i=t.x,e=t.y,o=t.z;t.w}return n=n||t,n.x=r[0]*i+r[4]*e+r[8]*o,n.y=r[1]*i+r[5]*e+r[9]*o,n.z=r[2]*i+r[6]*e+r[10]*o,n},this.multiply=function(t){var n,r,i,e,o,s,a,h,u,c,y,f,p,l,v,d,x,S,Q,R,m,w,M,z,g,V,_,C,A,b,P,T,q=this.data,F=t.data||t;return n=q[0],r=q[1],i=q[2],e=q[3],o=q[4],s=q[5],a=q[6],h=q[7],u=q[8],c=q[9],y=q[10],f=q[11],p=q[12],l=q[13],v=q[14],d=q[15],x=F[0],S=F[1],Q=F[2],R=F[3],m=F[4],w=F[5],M=F[6],z=F[7],g=F[8],V=F[9],_=F[10],C=F[11],A=F[12],b=F[13],P=F[14],T=F[15],q[0]=n*x+o*S+u*Q+p*R,q[1]=r*x+s*S+c*Q+l*R,q[2]=i*x+a*S+y*Q+v*R,q[3]=e*x+h*S+f*Q+d*R,q[4]=n*m+o*w+u*M+p*z,q[5]=r*m+s*w+c*M+l*z,q[6]=i*m+a*w+y*M+v*z,q[7]=e*m+h*w+f*M+d*z,q[8]=n*g+o*V+u*_+p*C,q[9]=r*g+s*V+c*_+l*C,q[10]=i*g+a*V+y*_+v*C,q[11]=e*g+h*V+f*_+d*C,q[12]=n*A+o*b+u*P+p*T,q[13]=r*A+s*b+c*P+l*T,q[14]=i*A+a*b+y*P+v*T,q[15]=e*A+h*b+f*P+d*T,this},this.setTQS=function(t,n,r,i,e,o,s,a,h,u,c){var y=c||this.data;this.identity(c);var f=e*e,p=o*o,l=s*s;return SQR.flipMatrix?(y[0]=(1-2*p-2*l)*a,y[1]=(2*e*o-2*s*i)*a,y[2]=(2*e*s+2*o*i)*a,y[4]=(2*e*o+2*s*i)*h,y[5]=(1-2*f-2*l)*h,y[6]=(2*o*s-2*e*i)*h,y[8]=(2*e*s-2*o*i)*u,y[9]=(2*o*s+2*e*i)*u,y[10]=(1-2*f-2*p)*u):(y[0]=(1-2*p-2*l)*a,y[4]=(2*e*o-2*s*i)*a,y[8]=(2*e*s+2*o*i)*a,y[1]=(2*e*o+2*s*i)*h,y[5]=(1-2*f-2*l)*h,y[9]=(2*o*s-2*e*i)*h,y[2]=(2*e*s-2*o*i)*u,y[6]=(2*o*s+2*e*i)*u,y[10]=(1-2*f-2*p)*u),y[12]=t,y[13]=n,y[14]=r,c||this},this.setTRS=function(t,n,r,i,e,o,s,a,h,u){var c=u||this.data;this.identity(u);var y=Math.sin(i),f=Math.cos(i),p=Math.sin(e),l=Math.cos(e),v=Math.sin(o),d=Math.cos(o);return SQR.flipMatrix?(c[0]=(l*d+p*y*v)*s,c[1]=(-l*v+p*y*d)*s,c[2]=p*f*s,c[4]=v*f*a,c[5]=d*f*a,c[6]=-y*a,c[8]=(-p*d+l*y*v)*h,c[9]=(v*p+l*y*d)*h,c[10]=l*f*h):(c[0]=(l*d+p*y*v)*s,c[4]=(-l*v+p*y*d)*s,c[8]=p*f*s,c[1]=v*f*a,c[5]=d*f*a,c[9]=-y*a,c[2]=(-p*d+l*y*v)*h,c[6]=(v*p+l*y*d)*h,c[10]=l*f*h),c[12]=t,c[13]=n,c[14]=r,u||this},this.setScale=function(t,n,r,i){var e=i||this.data;return e[0]=t,e[5]=n,e[10]=r,i||this},this.setTranslation=function(t,n,r,i){var e=i||this.data;return e[12]=t,e[13]=n,e[14]=r,i||this},this.setRotation=function(t,n,r,i){var e=i||this.data,o=Math.sin(t),s=Math.cos(t),a=Math.sin(n),h=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return e[0]=h*c+a*o*u,e[1]=-h*u+a*o*c,e[2]=a*s,e[4]=u*s,e[5]=c*s,e[6]=-o,e[8]=-a*c+h*o*u,e[9]=u*a+h*o*c,e[10]=h*s,i||this},this.translate=function(t,n,r){return this.identity(SQR.Matrix44.__temp),this.setTranslation(t,n,r,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.rotate=function(t,n,r){return this.identity(SQR.Matrix44.__temp),this.setRotation(t,n,r,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.scale=function(t,n,r){return this.identity(SQR.Matrix44.__temp),this.setScale(t,n,r,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.copyTo=function(t){for(var n=this.data,r=t.data||t,i=0;16>i;i++)r[i]=n[i];return t},this.copyRotationTo=function(t){var n=this.data,r=t.data||t;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[4],r[4]=n[5],r[5]=n[6],r[6]=n[8],r[7]=n[9],r[8]=n[10],t},this.extractPosition=function(t){var n=this.data;return t.set(n[12],n[13],n[14]),t},this.determinant=function(){var t=this.data;return t[0]*(t[5]*t[10]-t[9]*t[6])+t[4]*(t[9]*t[2]-t[1]*t[10])+t[8]*(t[1]*t[6]-t[5]*t[2])},this.inverse=function(t){var n=this.data,r=t?t.data||t:this.data,i=n[0],e=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6],c=n[7],y=n[8],f=n[9],p=n[10],l=n[11],v=n[12],d=n[13],x=n[14],S=n[15],Q=i*h-e*a,R=i*u-o*a,m=i*c-s*a,w=e*u-o*h,M=e*c-s*h,z=o*c-s*u,g=y*d-f*v,V=y*x-p*v,_=y*S-l*v,C=f*x-p*d,A=f*S-l*d,b=p*S-l*x,P=Q*b-R*A+m*C+w*_-M*V+z*g;return P?(P=1/P,r[0]=(h*b-u*A+c*C)*P,r[1]=(o*A-e*b-s*C)*P,r[2]=(d*z-x*M+S*w)*P,r[3]=(p*M-f*z-l*w)*P,r[4]=(u*_-a*b-c*V)*P,r[5]=(i*b-o*_+s*V)*P,r[6]=(x*m-v*z-S*R)*P,r[7]=(y*z-p*m+l*R)*P,r[8]=(a*A-h*_+c*g)*P,r[9]=(e*_-i*A-s*g)*P,r[10]=(v*M-d*m+S*Q)*P,r[11]=(f*m-y*M-l*Q)*P,r[12]=(h*V-a*C-u*g)*P,r[13]=(i*C-e*V+o*g)*P,r[14]=(d*R-v*w-x*Q)*P,r[15]=(y*w-f*R+p*Q)*P,t):null},this.inverseMat3=function(t){var n=this.data,r=t.data,i=this.determinant();if(Math.abs(i)<1e-4)return console.warn("> SQR.Matrix44 - Attempt to inverse a singular matrix44. ",this.data),console.trace(),t;{var e=n[0],o=n[4],s=n[8],a=(n[12],n[1]),h=n[5],u=n[9],c=(n[13],n[2]),y=n[6],f=n[10];n[14]}return i=1/i,r[0]=(h*f-u*y)*i,r[1]=(s*y-o*f)*i,r[2]=(o*u-s*h)*i,r[3]=(u*c-a*f)*i,r[4]=(e*f-s*c)*i,r[5]=(s*a-e*u)*i,r[6]=(a*y-h*c)*i,r[7]=(o*c-e*y)*i,r[8]=(e*h-o*a)*i,t},this.transpose=function(t){var n=this.data,r=t?t.data||t:this.data,i=n[0],e=n[4],o=n[8],s=n[1],a=n[5],h=n[9],u=n[2],c=n[6],y=n[10];r[0]=i,r[1]=e,r[2]=o,r[4]=s,r[5]=a,r[6]=h,r[8]=u,r[9]=c,r[10]=y},this.lookAt=function(t,n){var r=this.data,i=SQR.V3.__tv1,e=SQR.V3.__tv2,o=SQR.V3.__tv3;return n=n||SQR.V3.up,o.set(r[12],r[13],r[14]),o.sub(o,t).norm(),0===o.magsq()&&(o.z=1),i.cross(n,o).norm(),0===i.magsq()&&(o.x+=1e-4,i.cross(n,o).norm()),e.cross(o,i),r[0]=i.x,r[4]=e.x,r[8]=o.x,r[1]=i.y,r[5]=e.y,r[9]=o.y,r[2]=i.z,r[6]=e.z,r[10]=o.z,this},t||this.identity()},SQR.Matrix44.__temp=new Float32Array(16),SQR.PerlinNoise=function(){function t(t,n,r){this.x=t,this.y=n,this.z=r}function n(t){return t*t*t*(t*(6*t-15)+10)}function r(t,n,r){return(1-r)*t+r*n}var i={};t.prototype.dot2=function(t,n){return this.x*t+this.y*n},t.prototype.dot3=function(t,n,r){return this.x*t+this.y*n+this.z*r};var e=[new t(1,1,0),new t(-1,1,0),new t(1,-1,0),new t(-1,-1,0),new t(1,0,1),new t(-1,0,1),new t(1,0,-1),new t(-1,0,-1),new t(0,1,1),new t(0,-1,1),new t(0,1,-1),new t(0,-1,-1)],o=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=new Array(512),a=new Array(512);i.seed=function(t){t>0&&1>t&&(t*=65536),t=Math.floor(t),256>t&&(t|=t<<8);for(var n=0;256>n;n++){var r;r=1&n?o[n]^255&t:o[n]^t>>8&255,s[n]=s[n+256]=r,a[n]=a[n+256]=e[r%12]}},i.seed(0);var h=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,c=1/3,y=1/6;return i.simplex2=function(t,n){var r,i,e,o,c,y=(t+n)*h,f=Math.floor(t+y),p=Math.floor(n+y),l=(f+p)*u,v=t-f+l,d=n-p+l;v>d?(o=1,c=0):(o=0,c=1);var x=v-o+u,S=d-c+u,Q=v-1+2*u,R=d-1+2*u;f&=255,p&=255;var m=a[f+s[p]],w=a[f+o+s[p+c]],M=a[f+1+s[p+1]],z=.5-v*v-d*d;0>z?r=0:(z*=z,r=z*z*m.dot2(v,d));var g=.5-x*x-S*S;0>g?i=0:(g*=g,i=g*g*w.dot2(x,S));var V=.5-Q*Q-R*R;return 0>V?e=0:(V*=V,e=V*V*M.dot2(Q,R)),70*(r+i+e)},i.simplex3=function(t,n,r){var i,e,o,h,u,f,p,l,v,d,x=(t+n+r)*c,S=Math.floor(t+x),Q=Math.floor(n+x),R=Math.floor(r+x),m=(S+Q+R)*y,w=t-S+m,M=n-Q+m,z=r-R+m;w>=M?M>=z?(u=1,f=0,p=0,l=1,v=1,d=0):w>=z?(u=1,f=0,p=0,l=1,v=0,d=1):(u=0,f=0,p=1,l=1,v=0,d=1):z>M?(u=0,f=0,p=1,l=0,v=1,d=1):z>w?(u=0,f=1,p=0,l=0,v=1,d=1):(u=0,f=1,p=0,l=1,v=1,d=0);var g=w-u+y,V=M-f+y,_=z-p+y,C=w-l+2*y,A=M-v+2*y,b=z-d+2*y,P=w-1+3*y,T=M-1+3*y,q=z-1+3*y;S&=255,Q&=255,R&=255;var F=a[S+s[Q+s[R]]],I=a[S+u+s[Q+f+s[R+p]]],D=a[S+l+s[Q+v+s[R+d]]],O=a[S+1+s[Q+1+s[R+1]]],j=.6-w*w-M*M-z*z;0>j?i=0:(j*=j,i=j*j*F.dot3(w,M,z));var N=.6-g*g-V*V-_*_;0>N?e=0:(N*=N,e=N*N*I.dot3(g,V,_));var E=.6-C*C-A*A-b*b;0>E?o=0:(E*=E,o=E*E*D.dot3(C,A,b));var B=.6-P*P-T*T-q*q;return 0>B?h=0:(B*=B,h=B*B*O.dot3(P,T,q)),32*(i+e+o+h)},i.perlin2=function(t,i){var e=Math.floor(t),o=Math.floor(i);t-=e,i-=o,e=255&e,o=255&o;var h=a[e+s[o]].dot2(t,i),u=a[e+s[o+1]].dot2(t,i-1),c=a[e+1+s[o]].dot2(t-1,i),y=a[e+1+s[o+1]].dot2(t-1,i-1),f=n(t);return r(r(h,c,f),r(u,y,f),n(i))},i.perlin3=function(t,i,e){var o=Math.floor(t),h=Math.floor(i),u=Math.floor(e);t-=o,i-=h,e-=u,o=255&o,h=255&h,u=255&u;var c=a[o+s[h+s[u]]].dot3(t,i,e),y=a[o+s[h+s[u+1]]].dot3(t,i,e-1),f=a[o+s[h+1+s[u]]].dot3(t,i-1,e),p=a[o+s[h+1+s[u+1]]].dot3(t,i-1,e-1),l=a[o+1+s[h+s[u]]].dot3(t-1,i,e),v=a[o+1+s[h+s[u+1]]].dot3(t-1,i,e-1),d=a[o+1+s[h+1+s[u]]].dot3(t-1,i-1,e),x=a[o+1+s[h+1+s[u+1]]].dot3(t-1,i-1,e-1),S=n(t),Q=n(i),R=n(e);return r(r(r(c,l,S),r(y,v,S),R),r(r(f,d,S),r(p,x,S),R),Q)},i}(),SQR.ProjectionMatrix=function(){"undefined"==typeof Float32Array&&(Float32Array=Array),this.data=new Float32Array(16),this.copyTo=function(t){for(var n=this.data,r=t.data||t,i=0;16>i;i++)r[i]=n[i];return t},this.identity()},SQR.ProjectionMatrix.getBoundsAtDistance=function(t,n,r,i){r=r||window.innerWidth,i=i||window.innerHeight;var e=r/i,o=Math.tan(t/180*Math.PI/2),s=n*o,a=s*e;return{w:a,h:s}},SQR.ProjectionMatrix.prototype.identity=function(){var t=this.data;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},SQR.ProjectionMatrix.prototype.screenPixels2d=function(){return this.orthographic(0,window.innerWidth,0,window.innerHeight,-1,1e3),this},SQR.ProjectionMatrix.prototype.orthographic=function(t,n,r,i,e,o){var s=this.data;this.near=e,this.far=o;var a=n-t,h=r-i,u=o-e,c=(n+t)/a,y=(r+i)/h,f=(o+e)/u;return s[0]=2/a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2/h,s[9]=0,s[13]=-y,s[2]=0,s[6]=0,s[10]=-2/u,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},SQR.ProjectionMatrix.prototype.perspective=function(t,n,r,i){t=t||60,r=r||1,i=i||1e3;var e=this.data,o=r*Math.tan(t*Math.PI/360),s=i-r;return e[0]=r/(o*n),e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=r/o,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=-(i+r)/s,e[14]=-(2*i*r)/s,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,this.fov=t,this.near=r,this.far=i,this},SQR.ProjectionMatrix.prototype.transformVector=function(t,n){var r=t.x,i=t.y,e=t.z,o=t.w,s=this.data;return n=n||t,n.x=s[0]*r+s[4]*i+s[8]*e+s[12]*o,n.y=s[1]*r+s[5]*i+s[9]*e+s[13]*o,n.z=s[2]*r+s[6]*i+s[10]*e+s[14]*o,n},SQR.ProjectionMatrix.prototype.inverse=function(t){var n=this.data;t=t||this.data;var r,i=n[0],e=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6],c=n[7],y=n[8],f=n[9],p=n[10],l=n[11],v=n[12],d=n[13],x=n[14],S=n[15],Q=i*h-e*a,R=i*u-o*a,m=i*c-s*a,w=e*u-o*h,M=e*c-s*h,z=o*c-s*u,g=y*d-f*v,V=y*x-p*v,_=y*S-l*v,C=f*x-p*d,A=f*S-l*d,b=p*S-l*x,P=Q*b-R*A+m*C+w*_-M*V+z*g;return P?(r=1/P,t[0]=(h*b-u*A+c*C)*r,t[1]=(-e*b+o*A-s*C)*r,t[2]=(d*z-x*M+S*w)*r,t[3]=(-f*z+p*M-l*w)*r,t[4]=(-a*b+u*_-c*V)*r,t[5]=(i*b-o*_+s*V)*r,t[6]=(-v*z+x*m-S*R)*r,t[7]=(y*z-p*m+l*R)*r,t[8]=(a*A-h*_+c*g)*r,t[9]=(-i*A+e*_-s*g)*r,t[10]=(v*M-d*m+S*Q)*r,t[11]=(-y*M+f*m-l*Q)*r,t[12]=(-a*C+h*V-u*g)*r,t[13]=(i*C-e*V+o*g)*r,t[14]=(-v*w+d*R-x*Q)*r,t[15]=(y*w-f*R+p*Q)*r,t):null},SQR.Quaternion=function(t,n,r,i){this.set(i,t,n,r)},SQR.Quaternion.prototype.set=function(t,n,r,i){return this.w=i||1,this.x=t||0,this.y=n||0,this.z=r||0,this},SQR.Quaternion.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,this},SQR.Quaternion.prototype.copyFrom=function(t){return this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z,this},SQR.Quaternion.prototype.identity=function(){return this.set(),this},SQR.Quaternion.prototype.mul=function(t,n){n=n||this;var r=n.w*t.w-n.x*t.x-n.y*t.y-n.z*t.z,i=n.w*t.x+n.x*t.w+n.y*t.z-n.z*t.y,e=n.w*t.y-n.x*t.z+n.y*t.w+n.z*t.x,o=n.w*t.z+n.x*t.y-n.y*t.x+n.z*t.w;return n.set(i,e,o,r),n.normalize(),n},SQR.Quaternion.prototype.dot=function(){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},SQR.Quaternion.prototype.lookAt=function(t,n){var r=SQR.Quaternion.__tv1,i=SQR.Quaternion.__tv2,e=SQR.Quaternion.__tv3;t.copyTo(r),n.copyTo(e),r.norm(),-1==r.z&&(r.x=1e-4,r.norm()),i.cross(e,r),e.cross(r,i),this.w=.5*Math.sqrt(1+i.x+e.y+r.z);var o=4*this.w;return this.x=(r.y-e.z)/o,this.y=(i.z-r.x)/o,this.z=(e.x-i.y)/o,this.normalize(),this},SQR.Quaternion.prototype.fromAngleAxis=function(t,n,r,i){var e=Math.sin(t/2);return this.x=n*e,this.y=r*e,this.z=i*e,this.w=Math.cos(t/2),this},SQR.Quaternion.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},SQR.Quaternion.prototype.normalize=function(){var t=this.mag();return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this},SQR.Quaternion.prototype.neg=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},SQR.Quaternion.prototype.toMatrix=function(){throw"SQR.Quaternion.toMatrix() is not implemented. Check SQR.Matrix44.TQS()"},SQR.Quaternion.slerp=function(t,n,r,i){if(i=i||new SQR.Quaternion,0===r)return i.copyFrom(t);if(1===r)return i.copyFrom(n);var e=SQR.Quaternion.dot(t,n);0>e&&(t.neg(),e=SQR.Quaternion.dot(t,n));var o=Math.acos(e),s=Math.sqrt(1-e*e),a=Math.sin((1-r)*o)/s,h=Math.sin(r*o)/s;return Math.abs(e)>=1?(a=1,h=0):Math.abs(s)<.001&&(a=.5,h=.5),i.w=t.w*a+n.w*h,i.x=t.x*a+n.x*h,i.y=t.y*a+n.y*h,i.z=t.z*a+n.z*h,i},SQR.Quaternion.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z+t.w*n.w},SQR.Quaternion.prototype.slerp=function(t,n,r){return SQR.Quaternion.slerp(t,n,r,this),this},SQR.Quaternion.__tv1=new SQR.Quaternion,SQR.Quaternion.__tv2=new SQR.Quaternion,SQR.Quaternion.__tv3=new SQR.Quaternion,function(t,n){function r(r,u,c){var p=[];u=1==u?{entropy:!0}:u||{};var S=s(o(u.entropy?[r,h(t)]:null==r?a():r,3),p),Q=new i(p),R=function(){for(var t=Q.g(f),n=v,r=0;d>t;)t=(t+r)*y,n*=y,r=Q.g(1);for(;t>=x;)t/=2,n/=2,r>>>=1;return(t+r)/n};return R.int32=function(){return 0|Q.g(4)},R.quick=function(){return Q.g(4)/4294967296},R["double"]=R,s(h(Q.S),t),(u.pass||c||function(t,r,i,o){return o&&(o.S&&e(o,Q),t.state=function(){return e(Q,{})}),i?(n[l]=t,r):t})(R,S,"global"in u?u.global:this==n,u.state)}function i(t){var n,r=t.length,i=this,e=0,o=i.i=i.j=0,s=i.S=[];for(r||(t=[r++]);y>e;)s[e]=e++;for(e=0;y>e;e++)s[e]=s[o=S&o+t[e%r]+(n=s[e])],s[o]=n;(i.g=function(t){for(var n,r=0,e=i.i,o=i.j,s=i.S;t--;)n=s[e=S&e+1],r=r*y+s[S&(s[e]=s[o=S&o+n])+(s[o]=n)];return i.i=e,i.j=o,r})(y)}function e(t,n){return n.i=t.i,n.j=t.j,n.S=t.S.slice(),n}function o(t,n){var r,i=[],e=typeof t;if(n&&"object"==e)for(r in t)try{i.push(o(t[r],n-1))}catch(s){}return i.length?i:"string"==e?t:t+"\x00"}function s(t,n){for(var r,i=t+"",e=0;e<i.length;)n[S&e]=S&(r^=19*n[S&e])+i.charCodeAt(e++);return h(n)}function a(){try{if(u)return h(u.randomBytes(y));var n=new Uint8Array(y);return(c.crypto||c.msCrypto).getRandomValues(n),h(n)}catch(r){var i=c.navigator,e=i&&i.plugins;return[+new Date,c,e,c.screen,h(t)]}}function h(t){return String.fromCharCode.apply(0,t)}var u,c=this,y=256,f=6,p=52,l="random",v=n.pow(y,f),d=n.pow(2,p),x=2*d,S=y-1;if(n["seed"+l]=r,s(n.random(),t),"object"==typeof module&&module.exports){module.exports=r;try{u=require("crypto")}catch(Q){}}else"function"==typeof define&&define.amd&&define(function(){return r})}([],Math),SQR.Spline=function(){var t,n,r=[],i=[],e=[],o={},s=function(r,i,e,o,s,a){var h=t.sub(r,i).neg(),u=n.sub(r,e),c=a>1?a:a*Math.min(h.mag(),u.mag());o.set().add(h,u).norm().mul(c),s.copyFrom(o).neg(),o.add(o,r),s.add(s,r)};return o.addSegment=function(r){var s;if(void 0!==r.x)s=r;else{var a=arguments,h=a.length;2==h?s=new SQR.V2(a[0],a[1]):3==h&&(s=new SQR.V3(a[0],a[1],a[2]))}return i.push(s),e.push(s.clone(),s.clone()),t||(t=i[0].clone(),n=i[0].clone()),o},o.create=function(t,n){if(i.length<2)return i;t=null!==t?t:.5,r.length=0;for(var a=i,h=e,u=i.length,c=0;u>c;c++){var y=a[c],f=h[2*c].set(),p=h[2*c+1].set(),l=0==c?a[u-1]:a[c-1],v=c==u-1?a[0]:a[c+1];s(y,l,v,f,p,t),h.push(f,p)}for(var c=0;u-1>c;c++){var l=a[c],v=c==u-1?a[0]:a[c+1],f=0!=c||n?h[2*c+1]:l,p=c!=u-2||n?h[2*c+2]:v,d=new SQR.Bezier(l,f,p,v);r.push(d)}if(n){var d=new SQR.Bezier(a[u-1],h[2*(u-1)+1],h[0],a[0]);r.push(d)}return o.smoothness=t,o.close=o.close,o},o.valueAt=function(t,n){1==t&&(t=.999999),t%=1;var i=t*r.length;return r[0|i].valueAt(i%1,n)},o.bezierAt=function(t){1==t&&(t=.999999),t%=1;var n=t*r.length;return r[0|n]},o.velocityAt=function(t,n){1==t&&(t=.999999),t%=1;var i=t*r.length;return r[0|i].velocityAt(i%1,n)},o.matrixAt=function(t,n){0==t&&(t=SQR.EPSILON),1==t&&(t=1-SQR.EPSILON),t%=1;var i=t*r.length;return r[0|i].matrixAt(i%1,n)},Object.defineProperty(o,"segments",{get:function(){return i}}),Object.defineProperty(o,"paths",{get:function(){return r}}),o},SQR.Triangle=function(t,n,r){this.v0=t,this.v1=n,this.v2=r,this.calculateCentroid=function(){this.centroid=new SQR.V2,this.centroid.x=(this.v0.x+this.v1.x+this.v2.x)/3,this.centroid.y=(this.v0.y+this.v1.y+this.v2.y)/3},this.calculateCircumCircle=function(){var t,n,r=this.v1.x-this.v0.x,i=this.v1.y-this.v0.y,e=this.v2.x-this.v0.x,o=this.v2.y-this.v0.y,s=r*(this.v0.x+this.v1.x)+i*(this.v0.y+this.v1.y),a=e*(this.v0.x+this.v2.x)+o*(this.v0.y+this.v2.y),h=2*(r*(this.v2.y-this.v1.y)-i*(this.v2.x-this.v1.x));if(Math.abs(h)<SQR.EPSILON){var u=Math.min(this.v0.x,this.v1.x,this.v2.x),c=Math.min(this.v0.y,this.v1.y,this.v2.y),y=Math.max(this.v0.x,this.v1.x,this.v2.x),f=Math.max(this.v0.y,this.v1.y,this.v2.y);this.circumCenter=new SQR.V2((u+y)/2,(c+f)/2),t=this.circumCenter.x-u,n=this.circumCenter.y-c}else{var p=(o*s-i*a)/h,l=(r*a-e*s)/h;this.circumCenter=new SQR.V2(p,l),t=this.circumCenter.x-this.v0.x,n=this.circumCenter.y-this.v0.y}this.circumRadiusSq=t*t+n*n,this.circumRadius=Math.sqrt(this.circumRadiusSq)},this.vertexInCircumcircle=function(t){this.circumCenter||this.calculateCircumCircle();var n=this.circumCenter.x-t.x,r=this.circumCenter.y-t.y,i=n*n+r*r;return i<=this.circumRadiusSq},this.get=function(t){return 0==t?this.v0:1==t?this.v1:2==t?this.v2:void 0}},SQR.V2=function(t,n){this.set(t,n),this.size=2},SQR.V2.prototype.set=function(t,n){return this.x=t||0,this.y=n||0,this},SQR.V2.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t},SQR.V2.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},SQR.V2.prototype.clone=function(){return new SQR.V2(this.x,this.y)},SQR.V2.prototype.magsq=function(){return this.x*this.x+this.y*this.y},SQR.V2.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V2.prototype.isZero=function(){return 0==this.x&&0==this.y},SQR.V2.prototype.mul=function(t){return this.x*=t,this.y*=t,this},SQR.V2.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},SQR.V2.prototype.norm=function(){var t=1/this.mag();return this.set(this.x*t,this.y*t),this},SQR.V2.prototype.add=function(t,n){return n=n||this,this.x=t.x+n.x,this.y=t.y+n.y,this},SQR.V2.prototype.sub=function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},SQR.V2.prototype.lerp=function(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this},SQR.V2.dot=function(t,n){return t.x*n.x+t.y*n.y},SQR.V2.prototype.perp=function(){return this.set(this.y,-this.x),this},SQR.V2.prototype.toUniform=function(){return this.toArray()},SQR.V2.prototype.toArray=function(){return this.array||(this.array=new Float32Array(2)),this.array[0]=this.x,this.array[1]=this.y,this.array},SQR.V3=function(t,n,r){this.set(t,n,r),this.size=3,SQR.V3.instances++},SQR.V3.prototype.set=function(t,n,r,i){return this.x=t||0,this.y=n||0,this.z=r||0,this.w=i||1,this},SQR.V3.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,void 0!=t.z&&(t.z=this.z),t},SQR.V3.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},SQR.V3.prototype.clone=function(){return new SQR.V3(this.x,this.y,this.z)},SQR.V3.prototype.magsq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},SQR.V3.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V3.prototype.isZero=function(){},SQR.V3.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},SQR.V3.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},SQR.V3.prototype.norm=function(){var t=1/this.mag();return this.set(this.x*t,this.y*t,this.z*t),this},SQR.V3.prototype.add=function(t,n){return n=n||this,this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},SQR.V3.prototype.sub=function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},SQR.V3.prototype.lerp=function(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this},SQR.V3.prototype.random=function(){return this.x=2*Math.random()-1,this.y=2*Math.random()-1,this.z=2*Math.random()-1,this},SQR.V3.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},SQR.V3.prototype.cross=function(t,n){var r=t.y*n.z-t.z*n.y,i=t.z*n.x-t.x*n.z,e=t.x*n.y-t.y*n.x;return this.set(r,i,e,this.w),this},SQR.V3.prototype.toUniform=function(){return this.toArray()},SQR.V3.prototype.toArray=function(){return this.array||(this.array=new Float32Array(3)),this.array[0]=this.x,this.array[1]=this.y,this.array[2]=this.z,this.array},SQR.V3.prototype.toString=function(){return x},SQR.V3.prototype.toScreenSpace=function(t,n){t=t||window.innerWidth,n=n||window.innerHeight,this.x=this.x/this.z*t/2+t/2,this.y=this.y/this.z*n/2+n/2,this.y=n-this.y},SQR.V3.prototype.addNormal=function(t){this.normal||(this.normal=new SQR.V3),this.normal.add(this.normal,t)},SQR.V3.prototype.resetNormal=function(){this.normal&&this.normal.set()},SQR.V3.up=new SQR.V3(0,1,0),SQR.V3.forward=new SQR.V3(0,0,1),SQR.V3.__tv1=new SQR.V3,SQR.V3.__tv2=new SQR.V3,SQR.V3.__tv3=new SQR.V3,SQR.V3.instances=0,SQR.CanvasRenderer=function(t){var n={},r=null,i="> SQR.Context - Invalid canvas reference.";if(t||(t=document.createElement("canvas")),t instanceof HTMLElement||(t=document.querySelector(t)),!t.getContext)throw i;var e=t.getContext("2d");return e.setLineDash||(e.setLineDash=function(){}),n.canvas=t,n.setSize=function(r,i){return t.width=r,t.height=i,t.style.width=r+"px",t.style.height=i+"px",n},n.setClearColor=function(t){return r=t,n},n.render=function(n){r?(r.indexOf("rgba")>-1&&e.clearRect(0,0,t.width,t.height),e.fillStyle=r,e.fillRect(0,0,t.width,t.height)):e.clearRect(0,0,t.width,t.height),n&&n.draw(e)},n},SQR.Transform2d=function(t){var n={};return n.name=t||"sqr.transform."+SQR.Transform2dCount++,n.position=new SQR.V3(0,0,0),n.rotation=0,n.scale=new SQR.V2(1,1),n.alpha=1,n.children=[],n.numChildren=0,n.add=function(){for(var t=0;t<arguments.length;t++){var r=arguments[t];r.parent=n,-1==n.children.indexOf(r)&&n.children.push(r)}return n.numChildren=n.children.length,n},n.remove=function(){for(var t=0;t<arguments.length;t++){var r=arguments[t],i=n.children.indexOf(r);if(-1==i)return!1;r.parent=null,n.children.splice(i,1)}return n.numChildren=n.children.length,n},n.removeAll=function(){n.children.length=0,n.numChildren=0},n.contains=function(t){return n.children.indexOf(t)>-1},n.recurse=function(t,r){r||t(n);for(var i=0;i<n.numChildren;i++)n.children[i].recurse(t)},n.draw=function(t){var r=t;r.save(),r.translate(n.position.x,n.position.y),r.rotate(n.rotation),r.scale(n.scale.x,n.scale.y);for(var i=0;i<n.numChildren;i++)n.children[i].draw(r);n.alpha<1&&(r.globalAlpha=n.alpha),n.shape&&n.shape(r,n),r.restore()},n},SQR.Transform2dCount=0;