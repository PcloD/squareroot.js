var SQR={TWOPI:2*Math.PI,HALFPI:.5*Math.PI,EPSILON:1e-6,gl:null,flipMatrix:!0,fullScreenQuad:null,shaderPath:".",Primitives:{V2:function(t,i){return new SQR.V2(t,i)},V3:function(t,i,n){return new SQR.V3(t,i,n)},Q:function(t,i,n,r){return new SQR.Quaternion(t,i,n,r)},M4:function(){return new SQR.Matrix44},F:function(t){var i=function(t,n,r,e){var o=SQR.Face().v(t,n,r,e);return i.faces.push(o),o};return i.faces=[],i.toBuffer=function(n){var r=0;return i.faces.forEach(function(i){t&&t.reverseNormals&&i.flip(),i.calculateNormal(),r+=i.toBuffer(n,r,t&&t.perVertexNormal)}),r},i}},v2:function(){return{aPosition:2}},v3:function(){return{aPosition:3}},v2u2:function(){return{aPosition:2,aUV:2}},v2c3:function(){return{aPosition:2,aColor:3}},v3n3:function(){return{aPosition:3,aNormal:3}},v3n3u2:function(){return{aPosition:3,aNormal:3,aUV:2}},WARN_UNIFORM_NOT_PRESENT:!1};SQR.Version={version:"3.0",build:136,date:"Oct 29th 2015"},SQR.Bezier=function(t,i,n,r){var e=this;this.p0=t,this.c0=i,this.c1=n,this.p1=r;var o,s,a,h=SQR.Interpolation.bezierPosition,u=SQR.Interpolation.bezierVelocity;this.velocityAt=function(t,i){return s=s||this.p0.clone().set(),i=i||s,i.x=u(t,this.p0.x,this.c0.x,this.c1.x,this.p1.x),i.y=u(t,this.p0.y,this.c0.y,this.c1.y,this.p1.y),null!==i.z&&null!==this.p0.z&&(i.z=u(t,this.p0.z,this.c0.z,this.c1.z,this.p1.z)),i},this.valueAt=function(t,i){return o=o||this.p0.clone().set(),i=i||o,i.x=h(t,this.p0.x,this.c0.x,this.c1.x,this.p1.x),i.y=h(t,this.p0.y,this.c0.y,this.c1.y,this.p1.y),null!==i.z&&null!==this.p0.z&&(i.z=h(t,this.p0.z,this.c0.z,this.c1.z,this.p1.z)),i},this.matrixAt=function(t,i){a=a||new SQR.Matrix44,i=i||a,i.identity();var n=e.valueAt(t),r=e.velocityAt(t).norm(),o=SQR.V3.__tv1.set().cross(r,SQR.V3.up),s=SQR.V3.__tv2.set().cross(r,o);return i.data[0]=o.x,i.data[4]=s.x,i.data[8]=r.x,i.data[1]=o.y,i.data[5]=s.y,i.data[9]=r.y,i.data[2]=o.z,i.data[6]=s.z,i.data[10]=r.z,i.setTranslation(n.x,n.y,n.z),i}},SQR.Color=function(t,i,n,r){return this instanceof SQR.Color?(this.setRGB(t,i,n),void(this.a=void 0==r?1:r)):new SQR.Color(t,i,n,r)},SQR.Color.prototype.setRGB=function(t,i,n){var r=this;return r.r=t||0,r.g=i||0,r.b=n||0,r},SQR.Color.prototype.setHex=function(t){var i=this;return t instanceof String&&(t=0==t.indexOf("#")?t.substring(1):t,t=-1==t.indexOf("0x")?"0x"+t:t,t=parseInt(t)),i.r=(t>>16&255)/255,i.g=(t>>8&255)/255,i.b=(255&t)/255,i},SQR.Color.prototype.toCSS=function(){var t=this,i=255*t.r|0,n=255*t.g|0,r=255*t.b|0;return"rgb("+i+", "+n+", "+r+")"},SQR.Color.prototype.copyFrom=function(t){var i=this;return i.r=t.r,i.g=t.g,i.b=t.b,i},SQR.Color.prototype.lighten=function(t){return this.mul(t)},SQR.Color.prototype.clone=function(){return new SQR.Color(c.r,c.g,c.b)},SQR.Color.prototype.mul=function(t){var i=this;return i.r=Math.min(1,i.r*t),i.g=Math.min(1,i.g*t),i.b=Math.min(1,i.b*t),i},SQR.Color.prototype.lerp=function(t,i,n){var r=this,e=1-n;return r.r=t.r*e+i.r*n,r.g=t.g*e+i.g*n,r.b=t.b*e+i.b*n,r},SQR.Color.prototype.toUniform=function(){var t=this;return t._array||(t._array=new Float32Array(3)),t._array[0]=t.r,t._array[1]=t.g,t._array[2]=t.b,t._array},SQR.Delaunay=function(){function t(t,i){var r=[];return i=i.filter(function(i){return i.vertexInCircumcircle(t)?(r.push(new n(i.v0,i.v1)),r.push(new n(i.v1,i.v2)),r.push(new n(i.v2,i.v0)),!1):!0}),r=e(r),r.forEach(function(n){i.push(new SQR.Triangle(n.v0,n.v1,t))}),i}var i={},n=function(t,i){this.v0=t,this.v1=i};n.prototype.equals=function(t){return this.v0===t.v0&&this.v1===t.v1},n.prototype.inverse=function(){return new n(this.v1,this.v0)};var r=function(t){var i,n,r,e;t.forEach(function(t){(void 0===i||t.x<i)&&(i=t.x),(void 0===n||t.y<n)&&(n=t.y),(void 0===r||t.x>r)&&(r=t.x),(void 0===e||t.y>e)&&(e=t.y)});var o=10*(r-i),s=10*(e-n),a=t[0].clone().set(i-o,n-3*s),h=t[0].clone().set(i-o,e+s),u=t[0].clone().set(r+3*o,e+s);return new SQR.Triangle(a,h,u)},e=function(t){for(var i=[],n=0;n<t.length;++n){for(var r=t[n],e=!0,o=0;o<t.length;++o)if(n!==o){var s=t[o];if(r.equals(s)||r.inverse().equals(s)){e=!1;break}}e&&i.push(r)}return i};return i.triangulate=function(i){var n=[],e=r(i);return n.push(e),i.forEach(function(i){n=t(i,n)}),n=n.filter(function(t){return!(t.v0==e.v0||t.v0==e.v1||t.v0==e.v2||t.v1==e.v0||t.v1==e.v1||t.v1==e.v2||t.v2==e.v0||t.v2==e.v1||t.v2==e.v2)})},i}(),SQR.Interpolation={bezierPosition:function(t,i,n,r,e){return i*(1-t)*(1-t)*(1-t)+3*n*t*(1-t)*(1-t)+3*r*t*t*(1-t)+e*t*t*t},bezierVelocity:function(t,i,n,r,e){return 3*n-3*i+2*(3*i-6*n+3*r)*t+3*(-i+3*n-3*r+e)*t*t},linear:function(t,i,n){return t>=n?t:n>=i?i:(n=(n-t)/(i-t),t+(i-t)*n)},smoothStep:function(t){return 3*t*t-2*t*t*t},quadIn:function(t){return t*t},quadOut:function(t){return t*(2-t)},quadInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Math.clamp=function(t,i,n){return i>=t?i:t>=n?n:t},Math.clamp01=function(t){return 0>=t?0:t>=1?1:t},Math.absMin=function(t,i){return-i>=t||t>=i?t:t>=0?i:-i},Math.map=function(t,i,n){return i>=t?0:t>=n?1:(t-i)/(n-i)},SQR.Matrix2D=function(){this.data=new Float32Array(9);var t,i,n,r,e;this.identity=function(t){return t=t||this.data,t[0]=1,t[3]=0,t[6]=0,t[1]=0,t[4]=1,t[7]=0,t[2]=0,t[5]=0,t[8]=1,this},this.transformVector=function(t){return n=this.data,r=t.x,e=t.y,t.x=n[0]*r+n[1]*e+n[2],t.y=n[3]*r+n[4]*e+n[5],t},this.setTranslation=function(t,i,r){return n=r||this.data,n[0]=1,n[3]=0,n[6]=t,n[1]=0,n[4]=1,n[7]=i,n[2]=0,n[5]=0,n[8]=1,this},this.getTranslation=function(t){return n=this.data,t=t||new SQR.V2,t.x=n[2],t.y=n[5],t},this.setScale=function(t,i,r){return n=r||this.data,n[0]=t,n[3]=0,n[6]=0,n[1]=0,n[4]=i,n[7]=0,n[2]=0,n[5]=0,n[8]=1,this},this.setShear=function(t,i,r){return n=r||this.data,n[0]=1,n[3]=t,n[6]=0,n[1]=i,n[4]=1,n[7]=0,n[2]=0,n[5]=0,n[8]=1,this},this.setRotation=function(t,i){n=i||this.data;var r=Math.cos(t),e=Math.sin(t);return n[0]=r,n[3]=-e,n[6]=0,n[1]=e,n[4]=r,n[7]=0,n[2]=0,n[5]=0,n[8]=1,this},this.setTRS=function(t,i,r,e,o){n=this.data;var s=Math.cos(r),a=Math.sin(r);return n[0]=s*e,n[3]=-a*o,n[6]=t,n[1]=a*e,n[4]=s*o,n[7]=i,n[2]=0,n[5]=0,n[8]=1,this},this.translate=function(t,i){return this.identity(SQR.Matrix2D.__temp),this.setTranslation(t,i,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.rotate=function(t){return this.identity(SQR.Matrix2D.__temp),this.setRotation(t,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.scale=function(t,i){return this.identity(SQR.Matrix2D.__temp),this.setScale(t,i,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.shear=function(t,i){return this.identity(SQR.Matrix2D.__temp),this.setRotation(t,i,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)};var o,s,a,h,u,c,y,f,p,l,v,d,x,S,Q,R,m,w;this.multiply=function(n){return t=this.data,i=n.data||n,o=t[0],s=t[3],a=t[6],h=t[1],u=t[4],c=t[7],y=t[2],f=t[5],p=t[8],l=i[0],v=i[3],d=i[6],x=i[1],S=i[4],Q=i[7],R=i[2],m=i[5],w=i[8],t[0]=o*l+s*x+a*R,t[3]=o*v+s*S+a*m,t[6]=o*d+s*Q+a*w,t[1]=h*l+u*x+c*R,t[4]=h*v+u*S+c*m,t[7]=h*d+u*Q+c*w,this},this.copyTo=function(n){return t=this.data,i=n.data||n,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],n},this.copyFrom=function(n){return t=n.data||n,i=this.data,i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},this.identity()},SQR.Matrix2D.__temp=new Float32Array(9),SQR.Matrix33=function(){this.data=new Float32Array(9),this.identity=function(){var t=this.data;return t[0]=1,t[3]=0,t[6]=0,t[1]=0,t[4]=1,t[7]=0,t[2]=0,t[5]=0,t[8]=1,this},this.transformVector=function(t,i){var n=this.data,r=t.x,e=t.y,o=t.z;return i=i||t,i.x=n[0]*r+n[3]*e+n[6]*o,i.y=n[1]*r+n[4]*e+n[7]*o,i.z=n[2]*r+n[5]*e+n[8]*o,i},this.determinant=function(){var t=this.data;return t[0]*(t[4]*t[8]-t[7]*t[5])+t[3]*(t[7]*t[2]-t[1]*t[8])+t[6]*(t[1]*t[5]-t[4]*t[2])},this.inverse=function(t){var i=this.data;t=t||this.data;var n,r=i[0],e=i[1],o=i[2],s=i[3],a=i[4],h=i[5],u=i[6],c=i[7],y=i[8],f=y*a-h*c,p=-y*s+h*u,l=c*s-a*u,i=r*f+e*p+o*l;return i?(n=1/i,t[0]=f*n,t[1]=(-y*e+o*c)*n,t[2]=(h*e-o*a)*n,t[3]=p*n,t[4]=(y*r-o*u)*n,t[5]=(-h*r+o*s)*n,t[6]=l*n,t[7]=(-c*r+e*u)*n,t[8]=(a*r-e*s)*n,t):(console.warn("Attempt to inverse a singular matrix33. ",this.data),t)},this.transpose=function(){var t=this.data,i=t[0],n=t[3],r=t[6],e=t[1],o=t[4],s=t[7],a=t[2],h=t[5],u=t[8];t[0]=i,t[1]=n,t[2]=r,t[3]=e,t[4]=o,t[5]=s,t[6]=a,t[7]=h,t[8]=u}},SQR.Matrix44=function(t){this.data=t||new Float32Array(16),this.identity=function(t){var i=t||this.data;return i[0]=1,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=1,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=1,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},this.transformVector=function(t,i){var n=this.data,r=t.x,e=t.y,o=t.z,s=t.w;return i=i||t,i.x=n[0]*r+n[4]*e+n[8]*o+n[12]*s,i.y=n[1]*r+n[5]*e+n[9]*o+n[13]*s,i.z=n[2]*r+n[6]*e+n[10]*o+n[14]*s,i},this.rotateVector=function(t,i){{var n=this.data,r=t.x,e=t.y,o=t.z;t.w}return i=i||t,i.x=n[0]*r+n[4]*e+n[8]*o,i.y=n[1]*r+n[5]*e+n[9]*o,i.z=n[2]*r+n[6]*e+n[10]*o,i},this.multiply=function(t){var i,n,r,e,o,s,a,h,u,c,y,f,p,l,v,d,x,S,Q,R,m,w,M,z,g,V,_,C,b,A,P,T,q=this.data,F=t.data||t;return i=q[0],n=q[1],r=q[2],e=q[3],o=q[4],s=q[5],a=q[6],h=q[7],u=q[8],c=q[9],y=q[10],f=q[11],p=q[12],l=q[13],v=q[14],d=q[15],x=F[0],S=F[1],Q=F[2],R=F[3],m=F[4],w=F[5],M=F[6],z=F[7],g=F[8],V=F[9],_=F[10],C=F[11],b=F[12],A=F[13],P=F[14],T=F[15],q[0]=i*x+o*S+u*Q+p*R,q[1]=n*x+s*S+c*Q+l*R,q[2]=r*x+a*S+y*Q+v*R,q[3]=e*x+h*S+f*Q+d*R,q[4]=i*m+o*w+u*M+p*z,q[5]=n*m+s*w+c*M+l*z,q[6]=r*m+a*w+y*M+v*z,q[7]=e*m+h*w+f*M+d*z,q[8]=i*g+o*V+u*_+p*C,q[9]=n*g+s*V+c*_+l*C,q[10]=r*g+a*V+y*_+v*C,q[11]=e*g+h*V+f*_+d*C,q[12]=i*b+o*A+u*P+p*T,q[13]=n*b+s*A+c*P+l*T,q[14]=r*b+a*A+y*P+v*T,q[15]=e*b+h*A+f*P+d*T,this},this.setTQS=function(t,i,n,r,e,o,s,a,h,u,c){var y=c||this.data;this.identity(c);var f=e*e,p=o*o,l=s*s;return SQR.flipMatrix?(y[0]=(1-2*p-2*l)*a,y[1]=(2*e*o-2*s*r)*a,y[2]=(2*e*s+2*o*r)*a,y[4]=(2*e*o+2*s*r)*h,y[5]=(1-2*f-2*l)*h,y[6]=(2*o*s-2*e*r)*h,y[8]=(2*e*s-2*o*r)*u,y[9]=(2*o*s+2*e*r)*u,y[10]=(1-2*f-2*p)*u):(y[0]=(1-2*p-2*l)*a,y[4]=(2*e*o-2*s*r)*a,y[8]=(2*e*s+2*o*r)*a,y[1]=(2*e*o+2*s*r)*h,y[5]=(1-2*f-2*l)*h,y[9]=(2*o*s-2*e*r)*h,y[2]=(2*e*s-2*o*r)*u,y[6]=(2*o*s+2*e*r)*u,y[10]=(1-2*f-2*p)*u),y[12]=t,y[13]=i,y[14]=n,c||this},this.setTRS=function(t,i,n,r,e,o,s,a,h,u){var c=u||this.data;this.identity(u);var y=Math.sin(r),f=Math.cos(r),p=Math.sin(e),l=Math.cos(e),v=Math.sin(o),d=Math.cos(o);return SQR.flipMatrix?(c[0]=(l*d+p*y*v)*s,c[1]=(-l*v+p*y*d)*s,c[2]=p*f*s,c[4]=v*f*a,c[5]=d*f*a,c[6]=-y*a,c[8]=(-p*d+l*y*v)*h,c[9]=(v*p+l*y*d)*h,c[10]=l*f*h):(c[0]=(l*d+p*y*v)*s,c[4]=(-l*v+p*y*d)*s,c[8]=p*f*s,c[1]=v*f*a,c[5]=d*f*a,c[9]=-y*a,c[2]=(-p*d+l*y*v)*h,c[6]=(v*p+l*y*d)*h,c[10]=l*f*h),c[12]=t,c[13]=i,c[14]=n,u||this},this.setScale=function(t,i,n,r){var e=r||this.data;return e[0]=t,e[5]=i,e[10]=n,r||this},this.setTranslation=function(t,i,n,r){var e=r||this.data;return e[12]=t,e[13]=i,e[14]=n,r||this},this.setRotation=function(t,i,n,r){var e=r||this.data,o=Math.sin(t),s=Math.cos(t),a=Math.sin(i),h=Math.cos(i),u=Math.sin(n),c=Math.cos(n);return e[0]=h*c+a*o*u,e[1]=-h*u+a*o*c,e[2]=a*s,e[4]=u*s,e[5]=c*s,e[6]=-o,e[8]=-a*c+h*o*u,e[9]=u*a+h*o*c,e[10]=h*s,r||this},this.translate=function(t,i,n){return this.identity(SQR.Matrix44.__temp),this.setTranslation(t,i,n,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.rotate=function(t,i,n){return this.identity(SQR.Matrix44.__temp),this.setRotation(t,i,n,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.scale=function(t,i,n){return this.identity(SQR.Matrix44.__temp),this.setScale(t,i,n,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.copyTo=function(t){for(var i=this.data,n=t.data||t,r=0;16>r;r++)n[r]=i[r];return t},this.copyRotationTo=function(t){var i=this.data,n=t.data||t;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[4],n[4]=i[5],n[5]=i[6],n[6]=i[8],n[7]=i[9],n[8]=i[10],t},this.extractPosition=function(t){var i=this.data;return t.set(i[12],i[13],i[14]),t},this.determinant=function(){var t=this.data;return t[0]*(t[5]*t[10]-t[9]*t[6])+t[4]*(t[9]*t[2]-t[1]*t[10])+t[8]*(t[1]*t[6]-t[5]*t[2])},this.inverse=function(t){var i=this.data,n=t?t.data||t:this.data,r=i[0],e=i[1],o=i[2],s=i[3],a=i[4],h=i[5],u=i[6],c=i[7],y=i[8],f=i[9],p=i[10],l=i[11],v=i[12],d=i[13],x=i[14],S=i[15],Q=r*h-e*a,R=r*u-o*a,m=r*c-s*a,w=e*u-o*h,M=e*c-s*h,z=o*c-s*u,g=y*d-f*v,V=y*x-p*v,_=y*S-l*v,C=f*x-p*d,b=f*S-l*d,A=p*S-l*x,P=Q*A-R*b+m*C+w*_-M*V+z*g;return P?(P=1/P,n[0]=(h*A-u*b+c*C)*P,n[1]=(o*b-e*A-s*C)*P,n[2]=(d*z-x*M+S*w)*P,n[3]=(p*M-f*z-l*w)*P,n[4]=(u*_-a*A-c*V)*P,n[5]=(r*A-o*_+s*V)*P,n[6]=(x*m-v*z-S*R)*P,n[7]=(y*z-p*m+l*R)*P,n[8]=(a*b-h*_+c*g)*P,n[9]=(e*_-r*b-s*g)*P,n[10]=(v*M-d*m+S*Q)*P,n[11]=(f*m-y*M-l*Q)*P,n[12]=(h*V-a*C-u*g)*P,n[13]=(r*C-e*V+o*g)*P,n[14]=(d*R-v*w-x*Q)*P,n[15]=(y*w-f*R+p*Q)*P,t):null},this.inverseMat3=function(t){var i=this.data,n=t.data,r=this.determinant();if(Math.abs(r)<1e-4)return console.warn("> SQR.Matrix44 - Attempt to inverse a singular matrix44. ",this.data),console.trace(),t;{var e=i[0],o=i[4],s=i[8],a=(i[12],i[1]),h=i[5],u=i[9],c=(i[13],i[2]),y=i[6],f=i[10];i[14]}return r=1/r,n[0]=(h*f-u*y)*r,n[1]=(s*y-o*f)*r,n[2]=(o*u-s*h)*r,n[3]=(u*c-a*f)*r,n[4]=(e*f-s*c)*r,n[5]=(s*a-e*u)*r,n[6]=(a*y-h*c)*r,n[7]=(o*c-e*y)*r,n[8]=(e*h-o*a)*r,t},this.transpose=function(t){var i=this.data,n=t?t.data||t:this.data,r=i[0],e=i[4],o=i[8],s=i[1],a=i[5],h=i[9],u=i[2],c=i[6],y=i[10];n[0]=r,n[1]=e,n[2]=o,n[4]=s,n[5]=a,n[6]=h,n[8]=u,n[9]=c,n[10]=y},this.lookAt=function(t,i){var n=this.data,r=SQR.V3.__tv1,e=SQR.V3.__tv2,o=SQR.V3.__tv3;return i=i||SQR.V3.up,o.set(n[12],n[13],n[14]),o.sub(o,t).norm(),0===o.magsq()&&(o.z=1),r.cross(i,o).norm(),0===r.magsq()&&(o.x+=1e-4,r.cross(i,o).norm()),e.cross(o,r),n[0]=r.x,n[4]=e.x,n[8]=o.x,n[1]=r.y,n[5]=e.y,n[9]=o.y,n[2]=r.z,n[6]=e.z,n[10]=o.z,this},t||this.identity()},SQR.Matrix44.__temp=new Float32Array(16),SQR.PerlinNoise=function(){function t(t,i,n){this.x=t,this.y=i,this.z=n}function i(t){return t*t*t*(t*(6*t-15)+10)}function n(t,i,n){return(1-n)*t+n*i}var r={};t.prototype.dot2=function(t,i){return this.x*t+this.y*i},t.prototype.dot3=function(t,i,n){return this.x*t+this.y*i+this.z*n};var e=[new t(1,1,0),new t(-1,1,0),new t(1,-1,0),new t(-1,-1,0),new t(1,0,1),new t(-1,0,1),new t(1,0,-1),new t(-1,0,-1),new t(0,1,1),new t(0,-1,1),new t(0,1,-1),new t(0,-1,-1)],o=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=new Array(512),a=new Array(512);r.seed=function(t){t>0&&1>t&&(t*=65536),t=Math.floor(t),256>t&&(t|=t<<8);for(var i=0;256>i;i++){var n;n=1&i?o[i]^255&t:o[i]^t>>8&255,s[i]=s[i+256]=n,a[i]=a[i+256]=e[n%12]}},r.seed(0);var h=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,c=1/3,y=1/6;return r.simplex2=function(t,i){var n,r,e,o,c,y=(t+i)*h,f=Math.floor(t+y),p=Math.floor(i+y),l=(f+p)*u,v=t-f+l,d=i-p+l;v>d?(o=1,c=0):(o=0,c=1);var x=v-o+u,S=d-c+u,Q=v-1+2*u,R=d-1+2*u;f&=255,p&=255;var m=a[f+s[p]],w=a[f+o+s[p+c]],M=a[f+1+s[p+1]],z=.5-v*v-d*d;0>z?n=0:(z*=z,n=z*z*m.dot2(v,d));var g=.5-x*x-S*S;0>g?r=0:(g*=g,r=g*g*w.dot2(x,S));var V=.5-Q*Q-R*R;return 0>V?e=0:(V*=V,e=V*V*M.dot2(Q,R)),70*(n+r+e)},r.simplex3=function(t,i,n){var r,e,o,h,u,f,p,l,v,d,x=(t+i+n)*c,S=Math.floor(t+x),Q=Math.floor(i+x),R=Math.floor(n+x),m=(S+Q+R)*y,w=t-S+m,M=i-Q+m,z=n-R+m;w>=M?M>=z?(u=1,f=0,p=0,l=1,v=1,d=0):w>=z?(u=1,f=0,p=0,l=1,v=0,d=1):(u=0,f=0,p=1,l=1,v=0,d=1):z>M?(u=0,f=0,p=1,l=0,v=1,d=1):z>w?(u=0,f=1,p=0,l=0,v=1,d=1):(u=0,f=1,p=0,l=1,v=1,d=0);var g=w-u+y,V=M-f+y,_=z-p+y,C=w-l+2*y,b=M-v+2*y,A=z-d+2*y,P=w-1+3*y,T=M-1+3*y,q=z-1+3*y;S&=255,Q&=255,R&=255;var F=a[S+s[Q+s[R]]],I=a[S+u+s[Q+f+s[R+p]]],O=a[S+l+s[Q+v+s[R+d]]],D=a[S+1+s[Q+1+s[R+1]]],N=.6-w*w-M*M-z*z;0>N?r=0:(N*=N,r=N*N*F.dot3(w,M,z));var j=.6-g*g-V*V-_*_;0>j?e=0:(j*=j,e=j*j*I.dot3(g,V,_));var E=.6-C*C-b*b-A*A;0>E?o=0:(E*=E,o=E*E*O.dot3(C,b,A));var L=.6-P*P-T*T-q*q;return 0>L?h=0:(L*=L,h=L*L*D.dot3(P,T,q)),32*(r+e+o+h)},r.perlin2=function(t,r){var e=Math.floor(t),o=Math.floor(r);t-=e,r-=o,e=255&e,o=255&o;var h=a[e+s[o]].dot2(t,r),u=a[e+s[o+1]].dot2(t,r-1),c=a[e+1+s[o]].dot2(t-1,r),y=a[e+1+s[o+1]].dot2(t-1,r-1),f=i(t);return n(n(h,c,f),n(u,y,f),i(r))},r.perlin3=function(t,r,e){var o=Math.floor(t),h=Math.floor(r),u=Math.floor(e);t-=o,r-=h,e-=u,o=255&o,h=255&h,u=255&u;var c=a[o+s[h+s[u]]].dot3(t,r,e),y=a[o+s[h+s[u+1]]].dot3(t,r,e-1),f=a[o+s[h+1+s[u]]].dot3(t,r-1,e),p=a[o+s[h+1+s[u+1]]].dot3(t,r-1,e-1),l=a[o+1+s[h+s[u]]].dot3(t-1,r,e),v=a[o+1+s[h+s[u+1]]].dot3(t-1,r,e-1),d=a[o+1+s[h+1+s[u]]].dot3(t-1,r-1,e),x=a[o+1+s[h+1+s[u+1]]].dot3(t-1,r-1,e-1),S=i(t),Q=i(r),R=i(e);return n(n(n(c,l,S),n(y,v,S),R),n(n(f,d,S),n(p,x,S),R),Q)},r}(),SQR.ProjectionMatrix=function(){"undefined"==typeof Float32Array&&(Float32Array=Array),this.data=new Float32Array(16),this.copyTo=function(t){for(var i=this.data,n=t.data||t,r=0;16>r;r++)n[r]=i[r];return t},this.identity()},SQR.ProjectionMatrix.getBoundsAtDistance=function(t,i,n,r){n=n||window.innerWidth,r=r||window.innerHeight;var e=n/r,o=Math.tan(t/180*Math.PI/2),s=i*o,a=s*e;return{w:a,h:s}},SQR.ProjectionMatrix.prototype.identity=function(){var t=this.data;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},SQR.ProjectionMatrix.prototype.screenPixels2d=function(){return this.orthographic(0,window.innerWidth,0,window.innerHeight,-1,1e3),this},SQR.ProjectionMatrix.prototype.orthographic=function(t,i,n,r,e,o){var s=this.data;this.near=e,this.far=o;var a=i-t,h=n-r,u=o-e,c=(i+t)/a,y=(n+r)/h,f=(o+e)/u;return s[0]=2/a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2/h,s[9]=0,s[13]=-y,s[2]=0,s[6]=0,s[10]=-2/u,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},SQR.ProjectionMatrix.prototype.perspective=function(t,i,n,r){t=t||60,n=n||1,r=r||1e3;var e=this.data,o=n*Math.tan(t*Math.PI/360),s=r-n;return e[0]=n/(o*i),e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=n/o,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=-(r+n)/s,e[14]=-(2*r*n)/s,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,this.fov=t,this.near=n,this.far=r,this},SQR.ProjectionMatrix.prototype.transformVector=function(t,i){var n=t.x,r=t.y,e=t.z,o=t.w,s=this.data;return i=i||t,i.x=s[0]*n+s[4]*r+s[8]*e+s[12]*o,i.y=s[1]*n+s[5]*r+s[9]*e+s[13]*o,i.z=s[2]*n+s[6]*r+s[10]*e+s[14]*o,i},SQR.ProjectionMatrix.prototype.inverse=function(t){var i=this.data;t=t||this.data;var n,r=i[0],e=i[1],o=i[2],s=i[3],a=i[4],h=i[5],u=i[6],c=i[7],y=i[8],f=i[9],p=i[10],l=i[11],v=i[12],d=i[13],x=i[14],S=i[15],Q=r*h-e*a,R=r*u-o*a,m=r*c-s*a,w=e*u-o*h,M=e*c-s*h,z=o*c-s*u,g=y*d-f*v,V=y*x-p*v,_=y*S-l*v,C=f*x-p*d,b=f*S-l*d,A=p*S-l*x,P=Q*A-R*b+m*C+w*_-M*V+z*g;return P?(n=1/P,t[0]=(h*A-u*b+c*C)*n,t[1]=(-e*A+o*b-s*C)*n,t[2]=(d*z-x*M+S*w)*n,t[3]=(-f*z+p*M-l*w)*n,t[4]=(-a*A+u*_-c*V)*n,t[5]=(r*A-o*_+s*V)*n,t[6]=(-v*z+x*m-S*R)*n,t[7]=(y*z-p*m+l*R)*n,t[8]=(a*b-h*_+c*g)*n,t[9]=(-r*b+e*_-s*g)*n,t[10]=(v*M-d*m+S*Q)*n,t[11]=(-y*M+f*m-l*Q)*n,t[12]=(-a*C+h*V-u*g)*n,t[13]=(r*C-e*V+o*g)*n,t[14]=(-v*w+d*R-x*Q)*n,t[15]=(y*w-f*R+p*Q)*n,t):null},SQR.Quaternion=function(t,i,n,r){this.set(r,t,i,n)},SQR.Quaternion.prototype.set=function(t,i,n,r){return this.w=r||1,this.x=t||0,this.y=i||0,this.z=n||0,this},SQR.Quaternion.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,this},SQR.Quaternion.prototype.copyFrom=function(t){return this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z,this},SQR.Quaternion.prototype.identity=function(){return this.set(),this},SQR.Quaternion.prototype.mul=function(t,i){i=i||this;var n=i.w*t.w-i.x*t.x-i.y*t.y-i.z*t.z,r=i.w*t.x+i.x*t.w+i.y*t.z-i.z*t.y,e=i.w*t.y-i.x*t.z+i.y*t.w+i.z*t.x,o=i.w*t.z+i.x*t.y-i.y*t.x+i.z*t.w;return i.set(r,e,o,n),i.normalize(),i},SQR.Quaternion.prototype.dot=function(){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},SQR.Quaternion.prototype.lookAt=function(t,i){var n=SQR.Quaternion.__tv1,r=SQR.Quaternion.__tv2,e=SQR.Quaternion.__tv3;t.copyTo(n),i.copyTo(e),n.norm(),-1==n.z&&(n.x=1e-4,n.norm()),r.cross(e,n),e.cross(n,r),this.w=.5*Math.sqrt(1+r.x+e.y+n.z);var o=4*this.w;return this.x=(n.y-e.z)/o,this.y=(r.z-n.x)/o,this.z=(e.x-r.y)/o,this.normalize(),this},SQR.Quaternion.prototype.fromAngleAxis=function(t,i,n,r){var e=Math.sin(t/2);return this.x=i*e,this.y=n*e,this.z=r*e,this.w=Math.cos(t/2),this},SQR.Quaternion.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},SQR.Quaternion.prototype.normalize=function(){var t=this.mag();return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this},SQR.Quaternion.prototype.neg=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},SQR.Quaternion.prototype.toMatrix=function(){throw"SQR.Quaternion.toMatrix() is not implemented. Check SQR.Matrix44.TQS()"},SQR.Quaternion.slerp=function(t,i,n,r){if(r=r||new SQR.Quaternion,0===n)return r.copyFrom(t);if(1===n)return r.copyFrom(i);var e=SQR.Quaternion.dot(t,i);0>e&&(t.neg(),e=SQR.Quaternion.dot(t,i));var o=Math.acos(e),s=Math.sqrt(1-e*e),a=Math.sin((1-n)*o)/s,h=Math.sin(n*o)/s;return Math.abs(e)>=1?(a=1,h=0):Math.abs(s)<.001&&(a=.5,h=.5),r.w=t.w*a+i.w*h,r.x=t.x*a+i.x*h,r.y=t.y*a+i.y*h,r.z=t.z*a+i.z*h,r},SQR.Quaternion.dot=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z+t.w*i.w},SQR.Quaternion.prototype.slerp=function(t,i,n){return SQR.Quaternion.slerp(t,i,n,this),this},SQR.Quaternion.__tv1=new SQR.Quaternion,SQR.Quaternion.__tv2=new SQR.Quaternion,SQR.Quaternion.__tv3=new SQR.Quaternion,function(t,i){function n(n,u,c){var p=[];u=1==u?{entropy:!0}:u||{};var S=s(o(u.entropy?[n,h(t)]:null==n?a():n,3),p),Q=new r(p),R=function(){for(var t=Q.g(f),i=v,n=0;d>t;)t=(t+n)*y,i*=y,n=Q.g(1);for(;t>=x;)t/=2,i/=2,n>>>=1;return(t+n)/i};return R.int32=function(){return 0|Q.g(4)},R.quick=function(){return Q.g(4)/4294967296},R["double"]=R,s(h(Q.S),t),(u.pass||c||function(t,n,r,o){return o&&(o.S&&e(o,Q),t.state=function(){return e(Q,{})}),r?(i[l]=t,n):t})(R,S,"global"in u?u.global:this==i,u.state)}function r(t){var i,n=t.length,r=this,e=0,o=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);y>e;)s[e]=e++;for(e=0;y>e;e++)s[e]=s[o=S&o+t[e%n]+(i=s[e])],s[o]=i;(r.g=function(t){for(var i,n=0,e=r.i,o=r.j,s=r.S;t--;)i=s[e=S&e+1],n=n*y+s[S&(s[e]=s[o=S&o+i])+(s[o]=i)];return r.i=e,r.j=o,n})(y)}function e(t,i){return i.i=t.i,i.j=t.j,i.S=t.S.slice(),i}function o(t,i){var n,r=[],e=typeof t;if(i&&"object"==e)for(n in t)try{r.push(o(t[n],i-1))}catch(s){}return r.length?r:"string"==e?t:t+"\x00"}function s(t,i){for(var n,r=t+"",e=0;e<r.length;)i[S&e]=S&(n^=19*i[S&e])+r.charCodeAt(e++);return h(i)}function a(){try{if(u)return h(u.randomBytes(y));var i=new Uint8Array(y);return(c.crypto||c.msCrypto).getRandomValues(i),h(i)}catch(n){var r=c.navigator,e=r&&r.plugins;return[+new Date,c,e,c.screen,h(t)]}}function h(t){return String.fromCharCode.apply(0,t)}var u,c=this,y=256,f=6,p=52,l="random",v=i.pow(y,f),d=i.pow(2,p),x=2*d,S=y-1;if(i["seed"+l]=n,s(i.random(),t),"object"==typeof module&&module.exports){module.exports=n;try{u=require("crypto")}catch(Q){}}else"function"==typeof define&&define.amd&&define(function(){return n})}([],Math),SQR.Spline=function(){var t,i,n=[],r=[],e=[],o={},s=function(n,r,e,o,s,a){var h=t.sub(n,r).neg(),u=i.sub(n,e),c=a>1?a:a*Math.min(h.mag(),u.mag());o.set().add(h,u).norm().mul(c),s.copyFrom(o).neg(),o.add(o,n),s.add(s,n)};return o.addSegment=function(n){var s;if(void 0!==n.x)s=n;else{var a=arguments,h=a.length;2==h?s=new SQR.V2(a[0],a[1]):3==h&&(s=new SQR.V3(a[0],a[1],a[2]))}return r.push(s),e.push(s.clone(),s.clone()),t||(t=r[0].clone(),i=r[0].clone()),o},o.create=function(t,i){if(r.length<2)return r;t=null!==t?t:.5,n.length=0;for(var a=r,h=e,u=r.length,c=0;u>c;c++){var y=a[c],f=h[2*c].set(),p=h[2*c+1].set(),l=0==c?a[u-1]:a[c-1],v=c==u-1?a[0]:a[c+1];s(y,l,v,f,p,t),h.push(f,p)}for(var c=0;u-1>c;c++){var l=a[c],v=c==u-1?a[0]:a[c+1],f=0!=c||i?h[2*c+1]:l,p=c!=u-2||i?h[2*c+2]:v,d=new SQR.Bezier(l,f,p,v);n.push(d)}if(i){var d=new SQR.Bezier(a[u-1],h[2*(u-1)+1],h[0],a[0]);n.push(d)}return o.smoothness=t,o.close=o.close,o},o.valueAt=function(t,i){1==t&&(t=.999999),t%=1;var r=t*n.length;return n[0|r].valueAt(r%1,i)},o.bezierAt=function(t){1==t&&(t=.999999),t%=1;var i=t*n.length;return n[0|i]},o.velocityAt=function(t,i){1==t&&(t=.999999),t%=1;var r=t*n.length;return n[0|r].velocityAt(r%1,i)},o.matrixAt=function(t,i){0==t&&(t=SQR.EPSILON),1==t&&(t=1-SQR.EPSILON),t%=1;var r=t*n.length;return n[0|r].matrixAt(r%1,i)},Object.defineProperty(o,"segments",{get:function(){return r}}),Object.defineProperty(o,"paths",{get:function(){return n}}),o},SQR.Triangle=function(t,i,n){this.v0=t,this.v1=i,this.v2=n,this.calculateCentroid=function(){this.centroid=new SQR.V2,this.centroid.x=(this.v0.x+this.v1.x+this.v2.x)/3,this.centroid.y=(this.v0.y+this.v1.y+this.v2.y)/3},this.calculateCircumCircle=function(){var t,i,n=this.v1.x-this.v0.x,r=this.v1.y-this.v0.y,e=this.v2.x-this.v0.x,o=this.v2.y-this.v0.y,s=n*(this.v0.x+this.v1.x)+r*(this.v0.y+this.v1.y),a=e*(this.v0.x+this.v2.x)+o*(this.v0.y+this.v2.y),h=2*(n*(this.v2.y-this.v1.y)-r*(this.v2.x-this.v1.x));if(Math.abs(h)<SQR.EPSILON){var u=Math.min(this.v0.x,this.v1.x,this.v2.x),c=Math.min(this.v0.y,this.v1.y,this.v2.y),y=Math.max(this.v0.x,this.v1.x,this.v2.x),f=Math.max(this.v0.y,this.v1.y,this.v2.y);this.circumCenter=new SQR.V2((u+y)/2,(c+f)/2),t=this.circumCenter.x-u,i=this.circumCenter.y-c}else{var p=(o*s-r*a)/h,l=(n*a-e*s)/h;this.circumCenter=new SQR.V2(p,l),t=this.circumCenter.x-this.v0.x,i=this.circumCenter.y-this.v0.y}this.circumRadiusSq=t*t+i*i,this.circumRadius=Math.sqrt(this.circumRadiusSq)},this.vertexInCircumcircle=function(t){this.circumCenter||this.calculateCircumCircle();var i=this.circumCenter.x-t.x,n=this.circumCenter.y-t.y,r=i*i+n*n;return r<=this.circumRadiusSq},this.get=function(t){return 0==t?this.v0:1==t?this.v1:2==t?this.v2:void 0}},SQR.V2=function(t,i){this.set(t,i),this.size=2},SQR.V2.prototype.set=function(t,i){return this.x=t||0,this.y=i||0,this},SQR.V2.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t},SQR.V2.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},SQR.V2.prototype.clone=function(){return new SQR.V2(this.x,this.y)},SQR.V2.prototype.magsq=function(){return this.x*this.x+this.y*this.y},SQR.V2.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V2.prototype.isZero=function(){return 0==this.x&&0==this.y},SQR.V2.prototype.mul=function(t){return this.x*=t,this.y*=t,this},SQR.V2.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},SQR.V2.prototype.norm=function(){var t=1/this.mag();return this.set(this.x*t,this.y*t),this},SQR.V2.prototype.add=function(t,i){return i=i||this,this.x=t.x+i.x,this.y=t.y+i.y,this},SQR.V2.prototype.sub=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},SQR.V2.prototype.lerp=function(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this},SQR.V2.dot=function(t,i){return t.x*i.x+t.y*i.y},SQR.V2.prototype.perp=function(){return this.set(this.y,-this.x),this},SQR.V2.prototype.toUniform=function(){return this.toArray()},SQR.V2.prototype.toArray=function(){return this.array||(this.array=new Float32Array(2)),this.array[0]=this.x,this.array[1]=this.y,this.array},SQR.V3=function(t,i,n){this.set(t,i,n),this.size=3,SQR.V3.instances++},SQR.V3.prototype.set=function(t,i,n,r){return this.x=t||0,this.y=i||0,this.z=n||0,this.w=r||1,this},SQR.V3.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,void 0!=t.z&&(t.z=this.z),t},SQR.V3.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},SQR.V3.prototype.clone=function(){return new SQR.V3(this.x,this.y,this.z)},SQR.V3.prototype.magsq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},SQR.V3.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V3.prototype.isZero=function(){return Math.abs(this.x)<SQR.EPSILON&&Math.abs(this.y)<SQR.EPSILON&&Math.abs(this.z)<SQR.EPSILON},SQR.V3.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},SQR.V3.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},SQR.V3.prototype.norm=function(){var t=1/this.mag();return this.set(this.x*t,this.y*t,this.z*t),this},SQR.V3.prototype.add=function(t,i){return i=i||this,this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},SQR.V3.prototype.sub=function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},SQR.V3.prototype.lerp=function(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this},SQR.V3.prototype.random=function(){return this.x=2*Math.random()-1,this.y=2*Math.random()-1,this.z=2*Math.random()-1,this},SQR.V3.dot=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},SQR.V3.prototype.cross=function(t,i){var n=t.y*i.z-t.z*i.y,r=t.z*i.x-t.x*i.z,e=t.x*i.y-t.y*i.x;return this.set(n,r,e,this.w),this},SQR.V3.prototype.toUniform=function(){return this.toArray()},SQR.V3.prototype.toArray=function(){return this.array||(this.array=new Float32Array(3)),this.array[0]=this.x,this.array[1]=this.y,this.array[2]=this.z,this.array},SQR.V3.prototype.toString=function(){return x},SQR.V3.prototype.toScreenSpace=function(t,i){t=t||window.innerWidth,i=i||window.innerHeight,this.x=this.x/this.z*t/2+t/2,this.y=this.y/this.z*i/2+i/2,this.y=i-this.y},SQR.V3.prototype.addNormal=function(t){this.normal||(this.normal=new SQR.V3),this.normal.add(this.normal,t)},SQR.V3.prototype.resetNormal=function(){this.normal&&this.normal.set()},SQR.V3.up=new SQR.V3(0,1,0),SQR.V3.forward=new SQR.V3(0,0,1),SQR.V3.__tv1=new SQR.V3,SQR.V3.__tv2=new SQR.V3,SQR.V3.__tv3=new SQR.V3,SQR.V3.instances=0,SQR.CanvasRenderer=function(t){var i={},n=null,r="> SQR.Context - Invalid canvas reference.";if(t||(t=document.createElement("canvas")),t instanceof HTMLElement||(t=document.querySelector(t)),!t.getContext)throw r;var e=t.getContext("2d");return e.setLineDash||(e.setLineDash=function(){}),i.canvas=t,i.setSize=function(n,r){return t.width=n,t.height=r,t.style.width=n+"px",t.style.height=r+"px",i},i.setClearColor=function(t){return n=t,i},i.render=function(i){n?(n.indexOf("rgba")>-1&&e.clearRect(0,0,t.width,t.height),e.fillStyle=n,e.fillRect(0,0,t.width,t.height)):e.clearRect(0,0,t.width,t.height),i&&i.draw(e)},i},SQR.Transform2d=function(t){var i={};return i.name=t||"sqr.transform."+SQR.Transform2dCount++,i.position=new SQR.V3(0,0,0),i.rotation=0,i.scale=new SQR.V2(1,1),i.alpha=1,i.children=[],i.numChildren=0,i.add=function(){for(var t=0;t<arguments.length;t++){var n=arguments[t];n.parent=i,-1==i.children.indexOf(n)&&i.children.push(n)}return i.numChildren=i.children.length,i},i.remove=function(){for(var t=0;t<arguments.length;t++){var n=arguments[t],r=i.children.indexOf(n);if(-1==r)return!1;n.parent=null,i.children.splice(r,1)}return i.numChildren=i.children.length,i},i.removeAll=function(){i.children.length=0,i.numChildren=0},i.contains=function(t){return i.children.indexOf(t)>-1},i.recurse=function(t,n){n||t(i);for(var r=0;r<i.numChildren;r++)i.children[r].recurse(t)},i.draw=function(t){var n=t;n.save(),n.translate(i.position.x,i.position.y),n.rotate(i.rotation),n.scale(i.scale.x,i.scale.y);for(var r=0;r<i.numChildren;r++)i.children[r].draw(n);i.alpha<1&&(n.globalAlpha=i.alpha),i.shape&&i.shape(n,i),n.restore()},i},SQR.Transform2dCount=0;