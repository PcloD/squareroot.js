var SQR={TWOPI:2*Math.PI,HALFPI:.5*Math.PI,EPSILON:1e-6,gl:null,flipMatrix:!0,fullScreenQuad:null,shaderPath:".",Primitives:{V2:function(t,n){return new SQR.V2(t,n)},V3:function(t,n,i){return new SQR.V3(t,n,i)},Q:function(t,n,i,r){return new SQR.Quaternion(t,n,i,r)},M4:function(){return new SQR.Matrix44},F:function(t){var n=function(t,i,r,e){var o=SQR.Face().v(t,i,r,e);return n.faces.push(o),o};return n.faces=[],n.toBuffer=function(i){var r=0;return n.faces.forEach(function(n){t&&t.reverseNormals&&n.flip(),n.calculateNormal(),r+=n.toBuffer(i,r,t&&t.perVertexNormal)}),r},n}},v2:function(){return{aPosition:2}},v3:function(){return{aPosition:3}},v2u2:function(){return{aPosition:2,aUV:2}},v2c3:function(){return{aPosition:2,aColor:3}},v3n3:function(){return{aPosition:3,aNormal:3}},v3n3u2:function(){return{aPosition:3,aNormal:3,aUV:2}},WARN_UNIFORM_NOT_PRESENT:!1};SQR.Version={version:"3.0",build:133,date:"Oct 27th 2015"},SQR.Bezier=function(t,n,i,r){var e=this;this.p0=t,this.c0=n,this.c1=i,this.p1=r;var o,s,a,h=SQR.Interpolation.bezierPosition,u=SQR.Interpolation.bezierVelocity;this.velocityAt=function(t,n){return s=s||this.p0.clone().set(),n=n||s,n.x=u(t,this.p0.x,this.c0.x,this.c1.x,this.p1.x),n.y=u(t,this.p0.y,this.c0.y,this.c1.y,this.p1.y),null!==n.z&&null!==this.p0.z&&(n.z=u(t,this.p0.z,this.c0.z,this.c1.z,this.p1.z)),n},this.valueAt=function(t,n){return o=o||this.p0.clone().set(),n=n||o,n.x=h(t,this.p0.x,this.c0.x,this.c1.x,this.p1.x),n.y=h(t,this.p0.y,this.c0.y,this.c1.y,this.p1.y),null!==n.z&&null!==this.p0.z&&(n.z=h(t,this.p0.z,this.c0.z,this.c1.z,this.p1.z)),n},this.matrixAt=function(t,n){a=a||new SQR.Matrix44,n=n||a,n.identity();var i=e.valueAt(t),r=e.velocityAt(t).norm(),o=SQR.V3.__tv1.set().cross(r,SQR.V3.up),s=SQR.V3.__tv2.set().cross(r,o);return n.data[0]=o.x,n.data[4]=s.x,n.data[8]=r.x,n.data[1]=o.y,n.data[5]=s.y,n.data[9]=r.y,n.data[2]=o.z,n.data[6]=s.z,n.data[10]=r.z,n.setTranslation(i.x,i.y,i.z),n}},SQR.Color=function(t,n,i){var r,e={};return e.setRGB=function(t,n,i){return e.r=t||0,e.g=n||0,e.b=i||0,e},e.setHex=function(t){return t instanceof String&&(t=0==t.indexOf("#")?t.substring(1):t,t=-1==t.indexOf("0x")?"0x"+t:t,t=parseInt(t)),e.r=(t>>16&255)/255,e.g=(t>>8&255)/255,e.b=(255&t)/255,e},e.toCSS=function(){var t=255*e.r|0,n=255*e.g|0,i=255*e.b|0;return"rgb("+t+", "+n+", "+i+")"},e.copyFrom=function(t){return e.r=t.r,e.g=t.g,e.b=t.b,e},e.lighten=function(t){return e.mul(t)},e.clone=function(){return new SQR.Color(e.r,e.g,e.b)},e.mul=function(t){return e.r=Math.min(1,e.r*t),e.g=Math.min(1,e.g*t),e.b=Math.min(1,e.b*t),e},e.lerp=function(t,n,i){var r=1-i;return e.r=t.r*r+n.r*i,e.g=t.g*r+n.g*i,e.b=t.b*r+n.b*i,e},e.toUniform=function(){return r||(r=new Float32Array(3)),r[0]=e.r,r[1]=e.g,r[2]=e.b,r},e.setRGB(t,n,i),e},SQR.Delaunay=function(){function t(t,n){var r=[];return n=n.filter(function(n){return n.vertexInCircumcircle(t)?(r.push(new i(n.v0,n.v1)),r.push(new i(n.v1,n.v2)),r.push(new i(n.v2,n.v0)),!1):!0}),r=e(r),r.forEach(function(i){n.push(new SQR.Triangle(i.v0,i.v1,t))}),n}var n={},i=function(t,n){this.v0=t,this.v1=n};i.prototype.equals=function(t){return this.v0===t.v0&&this.v1===t.v1},i.prototype.inverse=function(){return new i(this.v1,this.v0)};var r=function(t){var n,i,r,e;t.forEach(function(t){(void 0===n||t.x<n)&&(n=t.x),(void 0===i||t.y<i)&&(i=t.y),(void 0===r||t.x>r)&&(r=t.x),(void 0===e||t.y>e)&&(e=t.y)});var o=10*(r-n),s=10*(e-i),a=t[0].clone().set(n-o,i-3*s),h=t[0].clone().set(n-o,e+s),u=t[0].clone().set(r+3*o,e+s);return new SQR.Triangle(a,h,u)},e=function(t){for(var n=[],i=0;i<t.length;++i){for(var r=t[i],e=!0,o=0;o<t.length;++o)if(i!==o){var s=t[o];if(r.equals(s)||r.inverse().equals(s)){e=!1;break}}e&&n.push(r)}return n};return n.triangulate=function(n){var i=[],e=r(n);return i.push(e),n.forEach(function(n){i=t(n,i)}),i=i.filter(function(t){return!(t.v0==e.v0||t.v0==e.v1||t.v0==e.v2||t.v1==e.v0||t.v1==e.v1||t.v1==e.v2||t.v2==e.v0||t.v2==e.v1||t.v2==e.v2)})},n}(),SQR.Interpolation={bezierPosition:function(t,n,i,r,e){return n*(1-t)*(1-t)*(1-t)+3*i*t*(1-t)*(1-t)+3*r*t*t*(1-t)+e*t*t*t},bezierVelocity:function(t,n,i,r,e){return 3*i-3*n+2*(3*n-6*i+3*r)*t+3*(-n+3*i-3*r+e)*t*t},linear:function(t,n,i){return t>=i?t:i>=n?n:(i=(i-t)/(n-t),t+(n-t)*i)},smoothStep:function(t){return 3*t*t-2*t*t*t},quadIn:function(t){return t*t},quadOut:function(t){return t*(2-t)},quadInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Math.clamp=function(t,n,i){return n>=t?n:t>=i?i:t},Math.clamp01=function(t){return 0>=t?0:t>=1?1:t},Math.absMin=function(t,n){return-n>=t||t>=n?t:t>=0?n:-n},Math.map=function(t,n,i){return n>=t?0:t>=i?1:(t-n)/(i-n)},SQR.Matrix2D=function(){this.data=new Float32Array(9);var t,n,i,r,e;this.identity=function(t){return t=t||this.data,t[0]=1,t[3]=0,t[6]=0,t[1]=0,t[4]=1,t[7]=0,t[2]=0,t[5]=0,t[8]=1,this},this.transformVector=function(t){return i=this.data,r=t.x,e=t.y,t.x=i[0]*r+i[1]*e+i[2],t.y=i[3]*r+i[4]*e+i[5],t},this.setTranslation=function(t,n,r){return i=r||this.data,i[0]=1,i[3]=0,i[6]=t,i[1]=0,i[4]=1,i[7]=n,i[2]=0,i[5]=0,i[8]=1,this},this.getTranslation=function(t){return i=this.data,t=t||new SQR.V2,t.x=i[2],t.y=i[5],t},this.setScale=function(t,n,r){return i=r||this.data,i[0]=t,i[3]=0,i[6]=0,i[1]=0,i[4]=n,i[7]=0,i[2]=0,i[5]=0,i[8]=1,this},this.setShear=function(t,n,r){return i=r||this.data,i[0]=1,i[3]=t,i[6]=0,i[1]=n,i[4]=1,i[7]=0,i[2]=0,i[5]=0,i[8]=1,this},this.setRotation=function(t,n){i=n||this.data;var r=Math.cos(t),e=Math.sin(t);return i[0]=r,i[3]=-e,i[6]=0,i[1]=e,i[4]=r,i[7]=0,i[2]=0,i[5]=0,i[8]=1,this},this.setTRS=function(t,n,r,e,o){i=this.data;var s=Math.cos(r),a=Math.sin(r);return i[0]=s*e,i[3]=-a*o,i[6]=t,i[1]=a*e,i[4]=s*o,i[7]=n,i[2]=0,i[5]=0,i[8]=1,this},this.translate=function(t,n){return this.identity(SQR.Matrix2D.__temp),this.setTranslation(t,n,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.rotate=function(t){return this.identity(SQR.Matrix2D.__temp),this.setRotation(t,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.scale=function(t,n){return this.identity(SQR.Matrix2D.__temp),this.setScale(t,n,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)},this.shear=function(t,n){return this.identity(SQR.Matrix2D.__temp),this.setRotation(t,n,SQR.Matrix2D.__temp),this.multiply(SQR.Matrix2D.__temp)};var o,s,a,h,u,c,f,y,p,v,l,d,x,S,Q,R,m,w;this.multiply=function(i){return t=this.data,n=i.data||i,o=t[0],s=t[3],a=t[6],h=t[1],u=t[4],c=t[7],f=t[2],y=t[5],p=t[8],v=n[0],l=n[3],d=n[6],x=n[1],S=n[4],Q=n[7],R=n[2],m=n[5],w=n[8],t[0]=o*v+s*x+a*R,t[3]=o*l+s*S+a*m,t[6]=o*d+s*Q+a*w,t[1]=h*v+u*x+c*R,t[4]=h*l+u*S+c*m,t[7]=h*d+u*Q+c*w,this},this.copyTo=function(i){return t=this.data,n=i.data||i,n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],i},this.copyFrom=function(i){return t=i.data||i,n=this.data,n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this},this.identity()},SQR.Matrix2D.__temp=new Float32Array(9),SQR.Matrix33=function(){this.data=new Float32Array(9),this.identity=function(){var t=this.data;return t[0]=1,t[3]=0,t[6]=0,t[1]=0,t[4]=1,t[7]=0,t[2]=0,t[5]=0,t[8]=1,this},this.transformVector=function(t,n){var i=this.data,r=t.x,e=t.y,o=t.z;return n=n||t,n.x=i[0]*r+i[3]*e+i[6]*o,n.y=i[1]*r+i[4]*e+i[7]*o,n.z=i[2]*r+i[5]*e+i[8]*o,n},this.determinant=function(){var t=this.data;return t[0]*(t[4]*t[8]-t[7]*t[5])+t[3]*(t[7]*t[2]-t[1]*t[8])+t[6]*(t[1]*t[5]-t[4]*t[2])},this.inverse=function(t){var n=this.data;t=t||this.data;var i,r=n[0],e=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6],c=n[7],f=n[8],y=f*a-h*c,p=-f*s+h*u,v=c*s-a*u,n=r*y+e*p+o*v;return n?(i=1/n,t[0]=y*i,t[1]=(-f*e+o*c)*i,t[2]=(h*e-o*a)*i,t[3]=p*i,t[4]=(f*r-o*u)*i,t[5]=(-h*r+o*s)*i,t[6]=v*i,t[7]=(-c*r+e*u)*i,t[8]=(a*r-e*s)*i,t):(console.warn("Attempt to inverse a singular matrix33. ",this.data),t)},this.transpose=function(){var t=this.data,n=t[0],i=t[3],r=t[6],e=t[1],o=t[4],s=t[7],a=t[2],h=t[5],u=t[8];t[0]=n,t[1]=i,t[2]=r,t[3]=e,t[4]=o,t[5]=s,t[6]=a,t[7]=h,t[8]=u}},SQR.Matrix44=function(t){this.data=t||new Float32Array(16),this.identity=function(t){var n=t||this.data;return n[0]=1,n[4]=0,n[8]=0,n[12]=0,n[1]=0,n[5]=1,n[9]=0,n[13]=0,n[2]=0,n[6]=0,n[10]=1,n[14]=0,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this},this.transformVector=function(t,n){var i=this.data,r=t.x,e=t.y,o=t.z,s=t.w;return n=n||t,n.x=i[0]*r+i[4]*e+i[8]*o+i[12]*s,n.y=i[1]*r+i[5]*e+i[9]*o+i[13]*s,n.z=i[2]*r+i[6]*e+i[10]*o+i[14]*s,n},this.rotateVector=function(t,n){{var i=this.data,r=t.x,e=t.y,o=t.z;t.w}return n=n||t,n.x=i[0]*r+i[4]*e+i[8]*o,n.y=i[1]*r+i[5]*e+i[9]*o,n.z=i[2]*r+i[6]*e+i[10]*o,n},this.multiply=function(t){var n,i,r,e,o,s,a,h,u,c,f,y,p,v,l,d,x,S,Q,R,m,w,M,z,g,V,_,A,b,C,P,T,q=this.data,F=t.data||t;return n=q[0],i=q[1],r=q[2],e=q[3],o=q[4],s=q[5],a=q[6],h=q[7],u=q[8],c=q[9],f=q[10],y=q[11],p=q[12],v=q[13],l=q[14],d=q[15],x=F[0],S=F[1],Q=F[2],R=F[3],m=F[4],w=F[5],M=F[6],z=F[7],g=F[8],V=F[9],_=F[10],A=F[11],b=F[12],C=F[13],P=F[14],T=F[15],q[0]=n*x+o*S+u*Q+p*R,q[1]=i*x+s*S+c*Q+v*R,q[2]=r*x+a*S+f*Q+l*R,q[3]=e*x+h*S+y*Q+d*R,q[4]=n*m+o*w+u*M+p*z,q[5]=i*m+s*w+c*M+v*z,q[6]=r*m+a*w+f*M+l*z,q[7]=e*m+h*w+y*M+d*z,q[8]=n*g+o*V+u*_+p*A,q[9]=i*g+s*V+c*_+v*A,q[10]=r*g+a*V+f*_+l*A,q[11]=e*g+h*V+y*_+d*A,q[12]=n*b+o*C+u*P+p*T,q[13]=i*b+s*C+c*P+v*T,q[14]=r*b+a*C+f*P+l*T,q[15]=e*b+h*C+y*P+d*T,this},this.setTQS=function(t,n,i,r,e,o,s,a,h,u,c){var f=c||this.data;this.identity(c);var y=e*e,p=o*o,v=s*s;return SQR.flipMatrix?(f[0]=(1-2*p-2*v)*a,f[1]=(2*e*o-2*s*r)*a,f[2]=(2*e*s+2*o*r)*a,f[4]=(2*e*o+2*s*r)*h,f[5]=(1-2*y-2*v)*h,f[6]=(2*o*s-2*e*r)*h,f[8]=(2*e*s-2*o*r)*u,f[9]=(2*o*s+2*e*r)*u,f[10]=(1-2*y-2*p)*u):(f[0]=(1-2*p-2*v)*a,f[4]=(2*e*o-2*s*r)*a,f[8]=(2*e*s+2*o*r)*a,f[1]=(2*e*o+2*s*r)*h,f[5]=(1-2*y-2*v)*h,f[9]=(2*o*s-2*e*r)*h,f[2]=(2*e*s-2*o*r)*u,f[6]=(2*o*s+2*e*r)*u,f[10]=(1-2*y-2*p)*u),f[12]=t,f[13]=n,f[14]=i,c||this},this.setTRS=function(t,n,i,r,e,o,s,a,h,u){var c=u||this.data;this.identity(u);var f=Math.sin(r),y=Math.cos(r),p=Math.sin(e),v=Math.cos(e),l=Math.sin(o),d=Math.cos(o);return SQR.flipMatrix?(c[0]=(v*d+p*f*l)*s,c[1]=(-v*l+p*f*d)*s,c[2]=p*y*s,c[4]=l*y*a,c[5]=d*y*a,c[6]=-f*a,c[8]=(-p*d+v*f*l)*h,c[9]=(l*p+v*f*d)*h,c[10]=v*y*h):(c[0]=(v*d+p*f*l)*s,c[4]=(-v*l+p*f*d)*s,c[8]=p*y*s,c[1]=l*y*a,c[5]=d*y*a,c[9]=-f*a,c[2]=(-p*d+v*f*l)*h,c[6]=(l*p+v*f*d)*h,c[10]=v*y*h),c[12]=t,c[13]=n,c[14]=i,u||this},this.setScale=function(t,n,i,r){var e=r||this.data;return e[0]=t,e[5]=n,e[10]=i,r||this},this.setTranslation=function(t,n,i,r){var e=r||this.data;return e[12]=t,e[13]=n,e[14]=i,r||this},this.setRotation=function(t,n,i,r){var e=r||this.data,o=Math.sin(t),s=Math.cos(t),a=Math.sin(n),h=Math.cos(n),u=Math.sin(i),c=Math.cos(i);return e[0]=h*c+a*o*u,e[1]=-h*u+a*o*c,e[2]=a*s,e[4]=u*s,e[5]=c*s,e[6]=-o,e[8]=-a*c+h*o*u,e[9]=u*a+h*o*c,e[10]=h*s,r||this},this.translate=function(t,n,i){return this.identity(SQR.Matrix44.__temp),this.setTranslation(t,n,i,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.rotate=function(t,n,i){return this.identity(SQR.Matrix44.__temp),this.setRotation(t,n,i,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.scale=function(t,n,i){return this.identity(SQR.Matrix44.__temp),this.setScale(t,n,i,SQR.Matrix44.__temp),this.multiply(SQR.Matrix44.__temp)},this.copyTo=function(t){for(var n=this.data,i=t.data||t,r=0;16>r;r++)i[r]=n[r];return t},this.copyRotationTo=function(t){var n=this.data,i=t.data||t;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],t},this.extractPosition=function(t){var n=this.data;return t.set(n[12],n[13],n[14]),t},this.determinant=function(){var t=this.data;return t[0]*(t[5]*t[10]-t[9]*t[6])+t[4]*(t[9]*t[2]-t[1]*t[10])+t[8]*(t[1]*t[6]-t[5]*t[2])},this.inverse=function(t){var n=this.data,i=t?t.data||t:this.data,r=n[0],e=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6],c=n[7],f=n[8],y=n[9],p=n[10],v=n[11],l=n[12],d=n[13],x=n[14],S=n[15],Q=r*h-e*a,R=r*u-o*a,m=r*c-s*a,w=e*u-o*h,M=e*c-s*h,z=o*c-s*u,g=f*d-y*l,V=f*x-p*l,_=f*S-v*l,A=y*x-p*d,b=y*S-v*d,C=p*S-v*x,P=Q*C-R*b+m*A+w*_-M*V+z*g;return P?(P=1/P,i[0]=(h*C-u*b+c*A)*P,i[1]=(o*b-e*C-s*A)*P,i[2]=(d*z-x*M+S*w)*P,i[3]=(p*M-y*z-v*w)*P,i[4]=(u*_-a*C-c*V)*P,i[5]=(r*C-o*_+s*V)*P,i[6]=(x*m-l*z-S*R)*P,i[7]=(f*z-p*m+v*R)*P,i[8]=(a*b-h*_+c*g)*P,i[9]=(e*_-r*b-s*g)*P,i[10]=(l*M-d*m+S*Q)*P,i[11]=(y*m-f*M-v*Q)*P,i[12]=(h*V-a*A-u*g)*P,i[13]=(r*A-e*V+o*g)*P,i[14]=(d*R-l*w-x*Q)*P,i[15]=(f*w-y*R+p*Q)*P,t):null},this.inverseMat3=function(t){var n=this.data,i=t.data,r=this.determinant();if(Math.abs(r)<1e-4)return console.warn("> SQR.Matrix44 - Attempt to inverse a singular matrix44. ",this.data),console.trace(),t;{var e=n[0],o=n[4],s=n[8],a=(n[12],n[1]),h=n[5],u=n[9],c=(n[13],n[2]),f=n[6],y=n[10];n[14]}return r=1/r,i[0]=(h*y-u*f)*r,i[1]=(s*f-o*y)*r,i[2]=(o*u-s*h)*r,i[3]=(u*c-a*y)*r,i[4]=(e*y-s*c)*r,i[5]=(s*a-e*u)*r,i[6]=(a*f-h*c)*r,i[7]=(o*c-e*f)*r,i[8]=(e*h-o*a)*r,t},this.transpose=function(t){var n=this.data,i=t?t.data||t:this.data,r=n[0],e=n[4],o=n[8],s=n[1],a=n[5],h=n[9],u=n[2],c=n[6],f=n[10];i[0]=r,i[1]=e,i[2]=o,i[4]=s,i[5]=a,i[6]=h,i[8]=u,i[9]=c,i[10]=f},this.lookAt=function(t,n){var i=this.data,r=SQR.V3.__tv1,e=SQR.V3.__tv2,o=SQR.V3.__tv3;return n=n||SQR.V3.up,o.set(i[12],i[13],i[14]),o.sub(o,t).norm(),0===o.magsq()&&(o.z=1),r.cross(n,o).norm(),0===r.magsq()&&(o.x+=1e-4,r.cross(n,o).norm()),e.cross(o,r),i[0]=r.x,i[4]=e.x,i[8]=o.x,i[1]=r.y,i[5]=e.y,i[9]=o.y,i[2]=r.z,i[6]=e.z,i[10]=o.z,this},t||this.identity()},SQR.Matrix44.__temp=new Float32Array(16),SQR.PerlinNoise=function(){function t(t,n,i){this.x=t,this.y=n,this.z=i}function n(t){return t*t*t*(t*(6*t-15)+10)}function i(t,n,i){return(1-i)*t+i*n}var r={};t.prototype.dot2=function(t,n){return this.x*t+this.y*n},t.prototype.dot3=function(t,n,i){return this.x*t+this.y*n+this.z*i};var e=[new t(1,1,0),new t(-1,1,0),new t(1,-1,0),new t(-1,-1,0),new t(1,0,1),new t(-1,0,1),new t(1,0,-1),new t(-1,0,-1),new t(0,1,1),new t(0,-1,1),new t(0,1,-1),new t(0,-1,-1)],o=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=new Array(512),a=new Array(512);r.seed=function(t){t>0&&1>t&&(t*=65536),t=Math.floor(t),256>t&&(t|=t<<8);for(var n=0;256>n;n++){var i;i=1&n?o[n]^255&t:o[n]^t>>8&255,s[n]=s[n+256]=i,a[n]=a[n+256]=e[i%12]}},r.seed(0);var h=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,c=1/3,f=1/6;return r.simplex2=function(t,n){var i,r,e,o,c,f=(t+n)*h,y=Math.floor(t+f),p=Math.floor(n+f),v=(y+p)*u,l=t-y+v,d=n-p+v;l>d?(o=1,c=0):(o=0,c=1);var x=l-o+u,S=d-c+u,Q=l-1+2*u,R=d-1+2*u;y&=255,p&=255;var m=a[y+s[p]],w=a[y+o+s[p+c]],M=a[y+1+s[p+1]],z=.5-l*l-d*d;0>z?i=0:(z*=z,i=z*z*m.dot2(l,d));var g=.5-x*x-S*S;0>g?r=0:(g*=g,r=g*g*w.dot2(x,S));var V=.5-Q*Q-R*R;return 0>V?e=0:(V*=V,e=V*V*M.dot2(Q,R)),70*(i+r+e)},r.simplex3=function(t,n,i){var r,e,o,h,u,y,p,v,l,d,x=(t+n+i)*c,S=Math.floor(t+x),Q=Math.floor(n+x),R=Math.floor(i+x),m=(S+Q+R)*f,w=t-S+m,M=n-Q+m,z=i-R+m;w>=M?M>=z?(u=1,y=0,p=0,v=1,l=1,d=0):w>=z?(u=1,y=0,p=0,v=1,l=0,d=1):(u=0,y=0,p=1,v=1,l=0,d=1):z>M?(u=0,y=0,p=1,v=0,l=1,d=1):z>w?(u=0,y=1,p=0,v=0,l=1,d=1):(u=0,y=1,p=0,v=1,l=1,d=0);var g=w-u+f,V=M-y+f,_=z-p+f,A=w-v+2*f,b=M-l+2*f,C=z-d+2*f,P=w-1+3*f,T=M-1+3*f,q=z-1+3*f;S&=255,Q&=255,R&=255;var F=a[S+s[Q+s[R]]],I=a[S+u+s[Q+y+s[R+p]]],D=a[S+v+s[Q+l+s[R+d]]],O=a[S+1+s[Q+1+s[R+1]]],j=.6-w*w-M*M-z*z;0>j?r=0:(j*=j,r=j*j*F.dot3(w,M,z));var N=.6-g*g-V*V-_*_;0>N?e=0:(N*=N,e=N*N*I.dot3(g,V,_));var E=.6-A*A-b*b-C*C;0>E?o=0:(E*=E,o=E*E*D.dot3(A,b,C));var B=.6-P*P-T*T-q*q;return 0>B?h=0:(B*=B,h=B*B*O.dot3(P,T,q)),32*(r+e+o+h)},r.perlin2=function(t,r){var e=Math.floor(t),o=Math.floor(r);t-=e,r-=o,e=255&e,o=255&o;var h=a[e+s[o]].dot2(t,r),u=a[e+s[o+1]].dot2(t,r-1),c=a[e+1+s[o]].dot2(t-1,r),f=a[e+1+s[o+1]].dot2(t-1,r-1),y=n(t);return i(i(h,c,y),i(u,f,y),n(r))},r.perlin3=function(t,r,e){var o=Math.floor(t),h=Math.floor(r),u=Math.floor(e);t-=o,r-=h,e-=u,o=255&o,h=255&h,u=255&u;var c=a[o+s[h+s[u]]].dot3(t,r,e),f=a[o+s[h+s[u+1]]].dot3(t,r,e-1),y=a[o+s[h+1+s[u]]].dot3(t,r-1,e),p=a[o+s[h+1+s[u+1]]].dot3(t,r-1,e-1),v=a[o+1+s[h+s[u]]].dot3(t-1,r,e),l=a[o+1+s[h+s[u+1]]].dot3(t-1,r,e-1),d=a[o+1+s[h+1+s[u]]].dot3(t-1,r-1,e),x=a[o+1+s[h+1+s[u+1]]].dot3(t-1,r-1,e-1),S=n(t),Q=n(r),R=n(e);return i(i(i(c,v,S),i(f,l,S),R),i(i(y,d,S),i(p,x,S),R),Q)},r}(),SQR.ProjectionMatrix=function(){"undefined"==typeof Float32Array&&(Float32Array=Array),this.data=new Float32Array(16),this.copyTo=function(t){for(var n=this.data,i=t.data||t,r=0;16>r;r++)i[r]=n[r];return t},this.identity()},SQR.ProjectionMatrix.getBoundsAtDistance=function(t,n,i,r){i=i||window.innerWidth,r=r||window.innerHeight;var e=i/r,o=Math.tan(t/180*Math.PI/2),s=n*o,a=s*e;return{w:a,h:s}},SQR.ProjectionMatrix.prototype.identity=function(){var t=this.data;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},SQR.ProjectionMatrix.prototype.screenPixels2d=function(){return this.orthographic(0,window.innerWidth,0,window.innerHeight,-1,1e3),this},SQR.ProjectionMatrix.prototype.orthographic=function(t,n,i,r,e,o){var s=this.data;this.near=e,this.far=o;var a=n-t,h=i-r,u=o-e,c=(n+t)/a,f=(i+r)/h,y=(o+e)/u;return s[0]=2/a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2/h,s[9]=0,s[13]=-f,s[2]=0,s[6]=0,s[10]=-2/u,s[14]=-y,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},SQR.ProjectionMatrix.prototype.perspective=function(t,n,i,r){this.near=i,this.far=r,this.fov=t;var e=this.data,o=i*Math.tan(t*Math.PI/360),s=r-i;return e[0]=i/(o*n),e[4]=0,e[8]=0,e[12]=0,e[1]=0,e[5]=i/o,e[9]=0,e[13]=0,e[2]=0,e[6]=0,e[10]=-(r+i)/s,e[14]=-(2*r*i)/s,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,this},SQR.ProjectionMatrix.prototype.transformVector=function(t,n){var i=t.x,r=t.y,e=t.z,o=t.w,s=this.data;return n=n||t,n.x=s[0]*i+s[4]*r+s[8]*e+s[12]*o,n.y=s[1]*i+s[5]*r+s[9]*e+s[13]*o,n.z=s[2]*i+s[6]*r+s[10]*e+s[14]*o,n},SQR.ProjectionMatrix.prototype.inverse=function(t){var n=this.data;t=t||this.data;var i,r=n[0],e=n[1],o=n[2],s=n[3],a=n[4],h=n[5],u=n[6],c=n[7],f=n[8],y=n[9],p=n[10],v=n[11],l=n[12],d=n[13],x=n[14],S=n[15],Q=r*h-e*a,R=r*u-o*a,m=r*c-s*a,w=e*u-o*h,M=e*c-s*h,z=o*c-s*u,g=f*d-y*l,V=f*x-p*l,_=f*S-v*l,A=y*x-p*d,b=y*S-v*d,C=p*S-v*x,P=Q*C-R*b+m*A+w*_-M*V+z*g;return P?(i=1/P,t[0]=(h*C-u*b+c*A)*i,t[1]=(-e*C+o*b-s*A)*i,t[2]=(d*z-x*M+S*w)*i,t[3]=(-y*z+p*M-v*w)*i,t[4]=(-a*C+u*_-c*V)*i,t[5]=(r*C-o*_+s*V)*i,t[6]=(-l*z+x*m-S*R)*i,t[7]=(f*z-p*m+v*R)*i,t[8]=(a*b-h*_+c*g)*i,t[9]=(-r*b+e*_-s*g)*i,t[10]=(l*M-d*m+S*Q)*i,t[11]=(-f*M+y*m-v*Q)*i,t[12]=(-a*A+h*V-u*g)*i,t[13]=(r*A-e*V+o*g)*i,t[14]=(-l*w+d*R-x*Q)*i,t[15]=(f*w-y*R+p*Q)*i,t):null},SQR.Quaternion=function(t,n,i,r){this.set(r,t,n,i)},SQR.Quaternion.prototype.set=function(t,n,i,r){return this.w=r||1,this.x=t||0,this.y=n||0,this.z=i||0,this},SQR.Quaternion.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,this},SQR.Quaternion.prototype.copyFrom=function(t){return this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z,this},SQR.Quaternion.prototype.identity=function(){return this.set(),this},SQR.Quaternion.prototype.mul=function(t,n){n=n||this;var i=n.w*t.w-n.x*t.x-n.y*t.y-n.z*t.z,r=n.w*t.x+n.x*t.w+n.y*t.z-n.z*t.y,e=n.w*t.y-n.x*t.z+n.y*t.w+n.z*t.x,o=n.w*t.z+n.x*t.y-n.y*t.x+n.z*t.w;return n.set(r,e,o,i),n.normalize(),n},SQR.Quaternion.prototype.dot=function(){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},SQR.Quaternion.prototype.lookAt=function(t,n){var i=SQR.Quaternion.__tv1,r=SQR.Quaternion.__tv2,e=SQR.Quaternion.__tv3;t.copyTo(i),n.copyTo(e),i.norm(),-1==i.z&&(i.x=1e-4,i.norm()),r.cross(e,i),e.cross(i,r),this.w=.5*Math.sqrt(1+r.x+e.y+i.z);var o=4*this.w;return this.x=(i.y-e.z)/o,this.y=(r.z-i.x)/o,this.z=(e.x-r.y)/o,this.normalize(),this},SQR.Quaternion.prototype.fromAngleAxis=function(t,n,i,r){var e=Math.sin(t/2);return this.x=n*e,this.y=i*e,this.z=r*e,this.w=Math.cos(t/2),this},SQR.Quaternion.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},SQR.Quaternion.prototype.normalize=function(){var t=this.mag();return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this},SQR.Quaternion.prototype.neg=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},SQR.Quaternion.prototype.toMatrix=function(){throw"SQR.Quaternion.toMatrix() is not implemented. Check SQR.Matrix44.TQS()"},SQR.Quaternion.slerp=function(t,n,i,r){if(r=r||new SQR.Quaternion,0===i)return r.copyFrom(t);if(1===i)return r.copyFrom(n);var e=SQR.Quaternion.dot(t,n);0>e&&(t.neg(),e=SQR.Quaternion.dot(t,n));var o=Math.acos(e),s=Math.sqrt(1-e*e),a=Math.sin((1-i)*o)/s,h=Math.sin(i*o)/s;return Math.abs(e)>=1?(a=1,h=0):Math.abs(s)<.001&&(a=.5,h=.5),r.w=t.w*a+n.w*h,r.x=t.x*a+n.x*h,r.y=t.y*a+n.y*h,r.z=t.z*a+n.z*h,r},SQR.Quaternion.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z+t.w*n.w},SQR.Quaternion.prototype.slerp=function(t,n,i){return SQR.Quaternion.slerp(t,n,i,this),this},SQR.Quaternion.__tv1=new SQR.Quaternion,SQR.Quaternion.__tv2=new SQR.Quaternion,SQR.Quaternion.__tv3=new SQR.Quaternion,function(t,n){function i(i,u,c){var p=[];u=1==u?{entropy:!0}:u||{};var S=s(o(u.entropy?[i,h(t)]:null==i?a():i,3),p),Q=new r(p),R=function(){for(var t=Q.g(y),n=l,i=0;d>t;)t=(t+i)*f,n*=f,i=Q.g(1);for(;t>=x;)t/=2,n/=2,i>>>=1;return(t+i)/n};return R.int32=function(){return 0|Q.g(4)},R.quick=function(){return Q.g(4)/4294967296},R["double"]=R,s(h(Q.S),t),(u.pass||c||function(t,i,r,o){return o&&(o.S&&e(o,Q),t.state=function(){return e(Q,{})}),r?(n[v]=t,i):t})(R,S,"global"in u?u.global:this==n,u.state)}function r(t){var n,i=t.length,r=this,e=0,o=r.i=r.j=0,s=r.S=[];for(i||(t=[i++]);f>e;)s[e]=e++;for(e=0;f>e;e++)s[e]=s[o=S&o+t[e%i]+(n=s[e])],s[o]=n;(r.g=function(t){for(var n,i=0,e=r.i,o=r.j,s=r.S;t--;)n=s[e=S&e+1],i=i*f+s[S&(s[e]=s[o=S&o+n])+(s[o]=n)];return r.i=e,r.j=o,i})(f)}function e(t,n){return n.i=t.i,n.j=t.j,n.S=t.S.slice(),n}function o(t,n){var i,r=[],e=typeof t;if(n&&"object"==e)for(i in t)try{r.push(o(t[i],n-1))}catch(s){}return r.length?r:"string"==e?t:t+"\x00"}function s(t,n){for(var i,r=t+"",e=0;e<r.length;)n[S&e]=S&(i^=19*n[S&e])+r.charCodeAt(e++);return h(n)}function a(){try{if(u)return h(u.randomBytes(f));var n=new Uint8Array(f);return(c.crypto||c.msCrypto).getRandomValues(n),h(n)}catch(i){var r=c.navigator,e=r&&r.plugins;return[+new Date,c,e,c.screen,h(t)]}}function h(t){return String.fromCharCode.apply(0,t)}var u,c=this,f=256,y=6,p=52,v="random",l=n.pow(f,y),d=n.pow(2,p),x=2*d,S=f-1;if(n["seed"+v]=i,s(n.random(),t),"object"==typeof module&&module.exports){module.exports=i;try{u=require("crypto")}catch(Q){}}else"function"==typeof define&&define.amd&&define(function(){return i})}([],Math),SQR.Spline=function(){var t,n,i=[],r=[],e=[],o={},s=function(i,r,e,o,s,a){var h=t.sub(i,r).neg(),u=n.sub(i,e),c=a>1?a:a*Math.min(h.mag(),u.mag());o.set().add(h,u).norm().mul(c),s.copyFrom(o).neg(),o.add(o,i),s.add(s,i)};return o.addSegment=function(i){var s;if(void 0!==i.x)s=i;else{var a=arguments,h=a.length;2==h?s=new SQR.V2(a[0],a[1]):3==h&&(s=new SQR.V3(a[0],a[1],a[2]))}return r.push(s),e.push(s.clone(),s.clone()),t||(t=r[0].clone(),n=r[0].clone()),o},o.create=function(t,n){if(r.length<2)return r;t=null!==t?t:.5,i.length=0;for(var a=r,h=e,u=r.length,c=0;u>c;c++){var f=a[c],y=h[2*c].set(),p=h[2*c+1].set(),v=0==c?a[u-1]:a[c-1],l=c==u-1?a[0]:a[c+1];s(f,v,l,y,p,t),h.push(y,p)}for(var c=0;u-1>c;c++){var v=a[c],l=c==u-1?a[0]:a[c+1],y=0!=c||n?h[2*c+1]:v,p=c!=u-2||n?h[2*c+2]:l,d=new SQR.Bezier(v,y,p,l);i.push(d)}if(n){var d=new SQR.Bezier(a[u-1],h[2*(u-1)+1],h[0],a[0]);i.push(d)}return o.smoothness=t,o.close=o.close,o},o.valueAt=function(t,n){1==t&&(t=.999999),t%=1;var r=t*i.length;return i[0|r].valueAt(r%1,n)},o.bezierAt=function(t){1==t&&(t=.999999),t%=1;var n=t*i.length;return i[0|n]},o.velocityAt=function(t,n){1==t&&(t=.999999),t%=1;var r=t*i.length;return i[0|r].velocityAt(r%1,n)},o.matrixAt=function(t,n){0==t&&(t=SQR.EPSILON),1==t&&(t=1-SQR.EPSILON),t%=1;var r=t*i.length;return i[0|r].matrixAt(r%1,n)},Object.defineProperty(o,"segments",{get:function(){return r}}),Object.defineProperty(o,"paths",{get:function(){return i}}),o},SQR.Triangle=function(t,n,i){this.v0=t,this.v1=n,this.v2=i,this.calculateCentroid=function(){this.centroid=new SQR.V2,this.centroid.x=(this.v0.x+this.v1.x+this.v2.x)/3,this.centroid.y=(this.v0.y+this.v1.y+this.v2.y)/3},this.calculateCircumCircle=function(){var t,n,i=this.v1.x-this.v0.x,r=this.v1.y-this.v0.y,e=this.v2.x-this.v0.x,o=this.v2.y-this.v0.y,s=i*(this.v0.x+this.v1.x)+r*(this.v0.y+this.v1.y),a=e*(this.v0.x+this.v2.x)+o*(this.v0.y+this.v2.y),h=2*(i*(this.v2.y-this.v1.y)-r*(this.v2.x-this.v1.x));if(Math.abs(h)<SQR.EPSILON){var u=Math.min(this.v0.x,this.v1.x,this.v2.x),c=Math.min(this.v0.y,this.v1.y,this.v2.y),f=Math.max(this.v0.x,this.v1.x,this.v2.x),y=Math.max(this.v0.y,this.v1.y,this.v2.y);this.circumCenter=new SQR.V2((u+f)/2,(c+y)/2),t=this.circumCenter.x-u,n=this.circumCenter.y-c}else{var p=(o*s-r*a)/h,v=(i*a-e*s)/h;this.circumCenter=new SQR.V2(p,v),t=this.circumCenter.x-this.v0.x,n=this.circumCenter.y-this.v0.y}this.circumRadiusSq=t*t+n*n,this.circumRadius=Math.sqrt(this.circumRadiusSq)},this.vertexInCircumcircle=function(t){this.circumCenter||this.calculateCircumCircle();var n=this.circumCenter.x-t.x,i=this.circumCenter.y-t.y,r=n*n+i*i;return r<=this.circumRadiusSq},this.get=function(t){return 0==t?this.v0:1==t?this.v1:2==t?this.v2:void 0}},SQR.V2=function(t,n){this.set(t,n),this.size=2},SQR.V2.prototype.set=function(t,n){return this.x=t||0,this.y=n||0,this},SQR.V2.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t},SQR.V2.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},SQR.V2.prototype.clone=function(){return new SQR.V2(this.x,this.y)},SQR.V2.prototype.magsq=function(){return this.x*this.x+this.y*this.y},SQR.V2.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V2.prototype.isZero=function(){return 0==this.x&&0==this.y},SQR.V2.prototype.mul=function(t){return this.x*=t,this.y*=t,this},SQR.V2.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},SQR.V2.prototype.norm=function(){var t=1/this.mag();return this.set(this.x*t,this.y*t),this},SQR.V2.prototype.add=function(t,n){return n=n||this,this.x=t.x+n.x,this.y=t.y+n.y,this},SQR.V2.prototype.sub=function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},SQR.V2.prototype.lerp=function(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this},SQR.V2.dot=function(t,n){return t.x*n.x+t.y*n.y},SQR.V2.prototype.perp=function(){return this.set(this.y,-this.x),this},SQR.V2.prototype.toUniform=function(){return this.toArray()},SQR.V2.prototype.toArray=function(){return this.array||(this.array=new Float32Array(2)),this.array[0]=this.x,this.array[1]=this.y,this.array},SQR.V3=function(t,n,i){this.set(t,n,i),this.size=3,SQR.V3.instances++},SQR.V3.prototype.set=function(t,n,i,r){return this.x=t||0,this.y=n||0,this.z=i||0,this.w=r||1,this},SQR.V3.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,void 0!=t.z&&(t.z=this.z),t},SQR.V3.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},SQR.V3.prototype.clone=function(){return new SQR.V3(this.x,this.y,this.z)},SQR.V3.prototype.magsq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},SQR.V3.prototype.mag=function(){return Math.sqrt(this.magsq())},SQR.V3.prototype.isZero=function(){},SQR.V3.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},SQR.V3.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},SQR.V3.prototype.norm=function(){var t=1/this.mag();return this.set(this.x*t,this.y*t,this.z*t),this},SQR.V3.prototype.add=function(t,n){return n=n||this,this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},SQR.V3.prototype.sub=function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},SQR.V3.prototype.lerp=function(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this},SQR.V3.prototype.random=function(){return this.x=2*Math.random()-1,this.y=2*Math.random()-1,this.z=2*Math.random()-1,this},SQR.V3.dot=function(t,n){return t.x*n.x+t.y*n.y+t.z*n.z},SQR.V3.prototype.cross=function(t,n){var i=t.y*n.z-t.z*n.y,r=t.z*n.x-t.x*n.z,e=t.x*n.y-t.y*n.x;return this.set(i,r,e,this.w),this},SQR.V3.prototype.toUniform=function(){return this.toArray()},SQR.V3.prototype.toArray=function(){return this.array||(this.array=new Float32Array(3)),this.array[0]=this.x,this.array[1]=this.y,this.array[2]=this.z,this.array},SQR.V3.prototype.toString=function(){return x},SQR.V3.prototype.toScreenSpace=function(t,n){t=t||window.innerWidth,n=n||window.innerHeight,this.x=this.x/this.z*t/2+t/2,this.y=this.y/this.z*n/2+n/2,this.y=n-this.y},SQR.V3.prototype.addNormal=function(t){this.normal||(this.normal=new SQR.V3),this.normal.add(this.normal,t)},SQR.V3.prototype.resetNormal=function(){this.normal&&this.normal.set()},SQR.V3.up=new SQR.V3(0,1,0),SQR.V3.forward=new SQR.V3(0,0,1),SQR.V3.__tv1=new SQR.V3,SQR.V3.__tv2=new SQR.V3,SQR.V3.__tv3=new SQR.V3,SQR.V3.instances=0,SQR.CanvasRenderer=function(t){var n={},i=null,r="> SQR.Context - Invalid canvas reference.";if(t||(t=document.createElement("canvas")),t instanceof HTMLElement||(t=document.querySelector(t)),!t.getContext)throw r;var e=t.getContext("2d");return e.setLineDash||(e.setLineDash=function(){}),n.canvas=t,n.setSize=function(i,r){return t.width=i,t.height=r,t.style.width=i+"px",t.style.height=r+"px",n},n.setClearColor=function(t){return i=t,n},n.render=function(n){i?(i.indexOf("rgba")>-1&&e.clearRect(0,0,t.width,t.height),e.fillStyle=i,e.fillRect(0,0,t.width,t.height)):e.clearRect(0,0,t.width,t.height),n&&n.draw(e)},n},SQR.Transform2d=function(t){var n={};return n.name=t||"sqr.transform."+SQR.Transform2dCount++,n.position=new SQR.V3(0,0,0),n.rotation=0,n.scale=new SQR.V2(1,1),n.alpha=1,n.children=[],n.numChildren=0,n.add=function(){for(var t=0;t<arguments.length;t++){var i=arguments[t];i.parent=n,-1==n.children.indexOf(i)&&n.children.push(i)}return n.numChildren=n.children.length,n},n.remove=function(){for(var t=0;t<arguments.length;t++){var i=arguments[t],r=n.children.indexOf(i);if(-1==r)return!1;i.parent=null,n.children.splice(r,1)}return n.numChildren=n.children.length,n},n.removeAll=function(){n.children.length=0,n.numChildren=0},n.contains=function(t){return n.children.indexOf(t)>-1},n.recurse=function(t,i){i||t(n);for(var r=0;r<n.numChildren;r++)n.children[r].recurse(t)},n.draw=function(t){var i=t;i.save(),i.translate(n.position.x,n.position.y),i.rotate(n.rotation),i.scale(n.scale.x,n.scale.y);for(var r=0;r<n.numChildren;r++)n.children[r].draw(i);n.alpha<1&&(i.globalAlpha=n.alpha),n.shape&&n.shape(i,n),i.restore()},n},SQR.Transform2dCount=0;